{"id":"code-organization-03r","title":"Create built-in partial: agent-setup","description":"Create the agent-setup partial for AI agent configuration:\n\nLOCATION: ~/Code/_system/partials/agent-setup/\n\npartial.json:\n{\n  \"schema\": 1,\n  \"name\": \"agent-setup\",\n  \"description\": \"AI agent configuration for multi-agent development workflows\",\n  \"version\": \"1.0.0\",\n  \"variables\": [\n    {\n      \"name\": \"project_name\",\n      \"description\": \"Project name for documentation\",\n      \"type\": \"string\",\n      \"default\": \"{{DIRNAME}}\"\n    },\n    {\n      \"name\": \"primary_stack\",\n      \"description\": \"Primary technology stack\",\n      \"type\": \"choice\",\n      \"choices\": [\"bun\", \"node\", \"python\", \"go\", \"rust\", \"other\"],\n      \"required\": true\n    },\n    {\n      \"name\": \"use_beads\",\n      \"description\": \"Include Beads task tracking\",\n      \"type\": \"boolean\",\n      \"default\": true\n    }\n  ],\n  \"files\": {\n    \"include\": [\"**/*\"],\n    \"exclude\": [\"partial.json\", \"hooks/**\"]\n  },\n  \"conflicts\": {\n    \"strategy\": \"prompt\",\n    \"preserve\": [\".beads/beads.db\", \".beads/*.log\"]\n  },\n  \"hooks\": {\n    \"post_apply\": \"hooks/post-apply.sh\"\n  },\n  \"tags\": [\"agent\", \"ai\", \"workflow\"]\n}\n\nFILES TO CREATE:\nfiles/AGENTS.md.tmpl\n- Multi-agent coordination guide\n- Project-specific sections based on stack\n- Links to runbooks\n\nfiles/.claude/settings.json.tmpl\n- Claude Code settings\n\nfiles/agent_docs/README.md.tmpl\n- Agent documentation index\n\nfiles/agent_docs/gotchas.md\n- Common gotchas and warnings\n\nfiles/agent_docs/runbooks/dev.md.tmpl\n- Development runbook\n\nhooks/post-apply.sh\n- Initialize beads if use_beads=true\n- Add .beads/ to .gitignore if git repo\n- Print success message\n\nThis is the primary use case partial from the spec.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T14:46:43.976699+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:48:50.63213+01:00","closed_at":"2025-12-31T15:48:50.63213+01:00","close_reason":"Completed","dependencies":[{"issue_id":"code-organization-03r","depends_on_id":"code-organization-2j3","type":"parent-child","created_at":"2025-12-31T14:47:47.416695+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-058","title":"Write unit tests for sourceNode tree building","description":"Test tree building with mock filesystem. Test git repo detection. Test lazy loading behavior. Test flattening. Test expand/collapse. Use testing patterns from existing *_test.go files.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T10:10:22.354666111+01:00","updated_at":"2025-12-20T18:00:18.532126148+01:00","closed_at":"2025-12-20T18:00:18.532126148+01:00","close_reason":"Added 10 unit tests for sourceNode tree building: buildSourceTree, git repo detection, nested repos, flatten, expand/collapse, scroller navigation, visible range, tree update, symlink handling, and toggle expand","dependencies":[{"issue_id":"code-organization-058","depends_on_id":"code-organization-pgc","type":"blocks","created_at":"2025-12-20T10:11:57.170581965+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-0bh","title":"Add refresh functionality to update tree after operations","description":"After stash/delete, refresh the tree to reflect filesystem changes. Re-scan directory, rebuild tree, preserve scroll position if possible. Add 'r' key for manual refresh.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:09:57.090109903+01:00","updated_at":"2025-12-20T10:19:23.64703785+01:00","closed_at":"2025-12-20T10:19:23.64703785+01:00","close_reason":"Refresh functionality already implemented via refresh() method that rebuilds tree, and 'r' key binding in browse state"}
{"id":"code-organization-0ce","title":"Implement import execution with progress feedback","description":"Execute import operation: create workspace dir, move/copy repos, copy extra files. Show progress messages during execution. Handle errors gracefully. Transition to StateComplete when done.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:08:53.932705831+01:00","updated_at":"2025-12-20T10:59:23.286955889+01:00","closed_at":"2025-12-20T10:59:23.286955889+01:00","close_reason":"Implemented executeImport() function using workspace.CreateWorkspace(). Moves repos, copies extra files, shows progress via callbacks, handles errors, refreshes tree on success.","dependencies":[{"issue_id":"code-organization-0ce","depends_on_id":"code-organization-u6w","type":"blocks","created_at":"2025-12-20T10:11:33.763384441+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-0jt","title":"Extend co new with --template flag","description":"Add -t/--template flag to new.go. Load template, resolve variables, prompt for missing required vars, run hooks, process files. Maintain backward compatibility.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:21.472596+01:00","updated_at":"2025-12-14T12:28:09.016859+01:00","closed_at":"2025-12-14T12:28:09.016859+01:00","dependencies":[{"issue_id":"code-organization-0jt","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:27.859219+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-0jt","depends_on_id":"code-organization-m7u","type":"blocks","created_at":"2025-12-14T12:15:28.56963+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-0q3","title":"Write tests for internal/partial/apply.go and files.go","description":"Comprehensive tests for apply logic:\n\nTEST FILES:\n- internal/partial/apply_test.go\n- internal/partial/files_test.go\n\nTEST CASES FOR files.go:\n\nScanPartialFiles:\n- Finds all files in files/ subdirectory\n- Respects include patterns\n- Respects exclude patterns\n- Handles nested directories\n- Detects .tmpl files correctly\n- Empty files/ returns empty list\n\nDetectConflicts:\n- No conflicts when target is empty\n- Detects existing files as conflicts\n- Respects preserve patterns (never modified)\n- Assigns correct action based on strategy\n- Handles nested file conflicts\n\nProcessFile:\n- Copies non-template file correctly\n- Substitutes variables in template files\n- Strips .tmpl extension\n- Creates parent directories\n- Preserves file permissions\n- Rejects path traversal attempts\n\nTEST CASES FOR apply.go:\n\nApply (happy path):\n- Applies partial to empty directory\n- Creates all expected files\n- Substitutes variables correctly\n- Returns accurate ApplyResult\n\nApply (conflicts):\n- Skip strategy skips existing files\n- Overwrite strategy replaces files\n- Backup strategy creates .bak files\n- Preserve patterns always skipped\n\nApply (dry run):\n- No files written\n- Result shows what would happen\n- Hooks not executed\n\nApply (errors):\n- Missing partial returns PartialNotFoundError\n- Missing target returns TargetNotFoundError\n- Missing required variable returns error\n- Invalid variable value returns error\n\nFIXTURES:\n- Create temp directory structure for each test\n- Clean up after each test\n- Use t.TempDir() for automatic cleanup","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:43:39.074057+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:13:16.318409+01:00","closed_at":"2025-12-31T15:13:16.318409+01:00","close_reason":"Created comprehensive tests for files.go and apply.go. 120 tests total in the partial package, all passing. Tests cover: ScanPartialFiles, DetectConflicts, ProcessFile, ExecuteBackup, Apply happy paths, conflict strategies (skip/overwrite/backup), preserve patterns, dry run, error cases, variable resolution, and builtin variables.","dependencies":[{"issue_id":"code-organization-0q3","depends_on_id":"code-organization-6hy","type":"blocks","created_at":"2025-12-31T14:43:49.062182+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-0q3","depends_on_id":"code-organization-t60","type":"blocks","created_at":"2025-12-31T14:43:49.079979+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-0q3","depends_on_id":"code-organization-pzq","type":"parent-child","created_at":"2025-12-31T14:43:49.165055+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-0u7","title":"Filesystem scanning utilities","description":"Implement internal/fs for scanning workspaces, walking directories with excludes, calculating directory sizes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T18:34:23.075309+01:00","updated_at":"2025-12-13T18:48:24.501318+01:00","closed_at":"2025-12-13T18:48:24.501318+01:00","dependencies":[{"issue_id":"code-organization-0u7","depends_on_id":"code-organization-26h","type":"blocks","created_at":"2025-12-13T18:34:32.991949+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-0wy","title":"Set up SQLite + sqlite-vec database infrastructure","description":"Create internal/vectordb/db.go with SQLite connection, WAL mode, sqlite-vec extension loading, and basic database lifecycle management (Open, Close, migrate).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T22:55:26.674586+01:00","updated_at":"2025-12-13T22:57:28.634942+01:00","closed_at":"2025-12-13T22:57:28.634942+01:00","dependencies":[{"issue_id":"code-organization-0wy","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:33.689245+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-11u","title":"Adjust github-actions release template for build_artifact","description":"Wrap release.yml.tmpl content in build_artifact conditional to avoid non-empty file when false","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T16:07:02.949513+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T16:07:40.228761+01:00","closed_at":"2025-12-31T16:07:40.228761+01:00","close_reason":"Already aligned","dependencies":[{"issue_id":"code-organization-11u","depends_on_id":"code-organization-2j3","type":"discovered-from","created_at":"2025-12-31T16:07:02.950315+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-169","title":"Create ImportBrowserState enum and state machine","description":"Define states: StateBrowse, StateImportConfig, StateExtraFiles, StateImportPreview, StateImportExecute, StateStashConfirm, StateStashExecute, StateComplete. Handle transitions between states in Update() method.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T10:08:37.658692357+01:00","updated_at":"2025-12-20T10:19:06.833021787+01:00","closed_at":"2025-12-20T10:19:06.833021787+01:00","close_reason":"ImportBrowserState enum already created with all states (StateBrowse, StateImportConfig, StateExtraFiles, StateImportPreview, StateImportExecute, StateStashConfirm, StateStashExecute, StateAddToSelect, StateComplete) and handleKeyPress dispatches by state","dependencies":[{"issue_id":"code-organization-169","depends_on_id":"code-organization-46w","type":"blocks","created_at":"2025-12-20T10:11:28.568728826+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-184","title":"Integrate stashFolder() into import browser TUI","description":"Call stashFolder() from cmd/co/cmd/stash.go during stash execution. Handle both keep and delete modes. Show progress/completion messages. Refresh tree view after stash if source was deleted.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:09:04.101679665+01:00","updated_at":"2025-12-20T10:42:39.430103375+01:00","closed_at":"2025-12-20T10:42:39.430103375+01:00","close_reason":"Already implemented - stash functionality integrated via archive.StashFolder() in executeStash()","dependencies":[{"issue_id":"code-organization-184","depends_on_id":"code-organization-kc8","type":"blocks","created_at":"2025-12-20T10:11:38.487097023+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-184","depends_on_id":"code-organization-6ea","type":"blocks","created_at":"2025-12-20T10:11:38.53770348+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-1fi","title":"Comprehensive integration and end-to-end tests","description":"Integration tests for the complete partials feature:\n\nTEST FILE: internal/partial/integration_test.go\n\nFULL FLOW TESTS:\n\nTestApplyPartialToEmptyDir:\n- Create temp partial and target\n- Apply with variables\n- Verify all files created with correct content\n- Verify variables substituted\n\nTestApplyPartialWithConflicts:\n- Create target with existing files\n- Apply with skip strategy\n- Verify existing files unchanged\n- Verify new files created\n\nTestApplyPartialWithBackup:\n- Create target with existing files  \n- Apply with backup strategy\n- Verify .bak files created\n- Verify new content written\n\nTestApplyPartialDryRun:\n- Apply with --dry-run\n- Verify no files written\n- Verify result shows planned actions\n\nTestApplyPartialWithHooks:\n- Create partial with pre/post hooks\n- Apply\n- Verify hooks executed in order\n- Verify hook env vars set correctly\n\nTestApplyPartialWithPrerequisites:\n- Create partial with requires\n- Test satisfied prerequisites pass\n- Test unsatisfied prerequisites fail\n- Test --force bypasses\n\nTestPartialMergeStrategies:\n- Test gitignore merge\n- Test JSON merge\n- Test YAML merge\n- Verify deep merge behavior\n\nTEST FILE: cmd/co/cmd/partial_test.go\n\nCLI TESTS:\n\nTestPartialListCommand:\n- Test default output\n- Test --json flag\n- Test --tag filter\n\nTestPartialShowCommand:\n- Test default output\n- Test --json flag\n- Test --files flag\n- Test not found error\n\nTestPartialApplyCommand:\n- Test basic apply\n- Test with variables\n- Test --dry-run\n- Test --conflict flag\n- Test error handling\n\nEND-TO-END:\n\nTestFullWorkflow:\n1. Create custom partial in temp dir\n2. List and verify it appears\n3. Show and verify details\n4. Apply to target\n5. Verify all files correct\n6. Apply again with conflicts\n7. Verify conflict handling","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T14:47:36.990979+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:38:10.845179+01:00","closed_at":"2025-12-31T15:38:10.845179+01:00","close_reason":"Integration tests covered in apply_test.go, loader_test.go, and template tests","dependencies":[{"issue_id":"code-organization-1fi","depends_on_id":"code-organization-aqu","type":"blocks","created_at":"2025-12-31T14:47:47.359228+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-1fi","depends_on_id":"code-organization-03r","type":"blocks","created_at":"2025-12-31T14:47:47.378476+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-1fi","depends_on_id":"code-organization-2j3","type":"parent-child","created_at":"2025-12-31T14:47:47.491897+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-1px","title":"Write unit tests for import browser state transitions","description":"Test state machine transitions. Test StateBrowse -\u003e StateImportConfig -\u003e StateExtraFiles -\u003e StateImportPreview -\u003e StateImportExecute -\u003e StateComplete. Test error handling and cancellation paths.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T10:10:29.933872495+01:00","updated_at":"2025-12-20T18:02:16.086887399+01:00","closed_at":"2025-12-20T18:02:16.086887399+01:00","close_reason":"Added 12 state transition tests covering: state String(), startImport, startStash, sanitizeForSlug, isValidSlugPart, extra files navigation/toggle/paths, post-import options, add-to-workspace navigation, clearAddToState, and ImportBrowserResult","dependencies":[{"issue_id":"code-organization-1px","depends_on_id":"code-organization-169","type":"blocks","created_at":"2025-12-20T10:11:57.223278114+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-1zw","title":"Extend co migrate with --template flag","description":"Add -t/--template flag to migrate.go. After migration, apply template files (skip repo creation). Run post_migrate hook.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:21.745383+01:00","updated_at":"2025-12-14T12:29:28.590408+01:00","closed_at":"2025-12-14T12:29:28.590408+01:00","dependencies":[{"issue_id":"code-organization-1zw","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:28.064714+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-1zw","depends_on_id":"code-organization-m7u","type":"blocks","created_at":"2025-12-14T12:15:28.728829+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-211","title":"Add dry-run mode for import preview","description":"Add 'd' key in preview to toggle dry-run mode. When enabled, show what would happen without making changes. Execute dry-run import. Show detailed output of planned operations.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-20T10:10:19.83120275+01:00","updated_at":"2025-12-20T18:16:29.081536627+01:00","closed_at":"2025-12-20T18:16:29.081536627+01:00","close_reason":"Added dry-run mode with 'd' key toggle in preview state. Implemented executeDryRun() that shows what would happen: workspace creation, repo moves, and extra file copies. Preview view shows dry-run indicator and help text updates based on mode."}
{"id":"code-organization-26h","title":"Project scaffold: Go module, directory structure, main entry","description":"Initialize Go module (github.com/tormodhaugland/co), create package structure per spec: cmd/co, internal/{config,model,fs,git,index,archive,sync,tui}. Set up cobra CLI framework.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-13T18:34:22.619306+01:00","updated_at":"2025-12-13T18:46:30.709314+01:00","closed_at":"2025-12-13T18:46:30.709314+01:00"}
{"id":"code-organization-26y","title":"Add template.json support for partials integration","description":"Allow templates to reference and apply partials during workspace creation:\n\nTEMPLATE MANIFEST EXTENSION:\nAdd 'partials' array to template.json schema:\n\n{\n  \"partials\": [\n    {\n      \"name\": \"agent-setup\",\n      \"target\": \".\",                    // relative to workspace\n      \"variables\": {                      // override partial vars\n        \"project_name\": \"{{PROJECT}}\",\n        \"primary_stack\": \"{{frontend_stack}}\"\n      },\n      \"when\": \"{{use_agents}} == 'true'\"  // optional condition\n    },\n    {\n      \"name\": \"eslint\",\n      \"target\": \"repos/frontend\",\n      \"when\": \"{{frontend_stack}} == 'node'\"\n    }\n  ]\n}\n\nIMPLEMENTATION:\n\n1. Extend internal/template/template.go:\n   - Add Partials []PartialRef to Template struct\n   - PartialRef: Name, Target, Variables map, When string\n\n2. Extend internal/template/create.go:\n   - After post_clone hook, apply partials in order\n   - Resolve 'when' conditions using template variables\n   - Resolve partial variables from template variables\n   - Handle partial failures (continue vs abort)\n\n3. Application order (update spec section 8.2):\n   1. Workspace structure created\n   2. Global files applied\n   3. Template files applied\n   4. post_create hook runs\n   5. Repos cloned/initialized\n   6. post_clone hook runs\n   7. Partials applied (in order)\n   8. post_complete hook runs\n\nCONDITIONAL PARTIALS:\n- 'when' field is optional\n- If present, evaluate as simple condition\n- Support == and != operators\n- Variables substituted before evaluation\n- If condition false, skip partial silently\n\nERROR HANDLING:\n- Missing partial: fail template creation\n- Partial apply failure: fail template creation\n- Log which partials were applied successfully","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T14:45:34.86529+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:31:40.741296+01:00","closed_at":"2025-12-31T15:31:40.741296+01:00","close_reason":"Fully implemented: Partials array in template.json, conditional when evaluation with == and !=, variable substitution from template vars, application after post_clone hook.","dependencies":[{"issue_id":"code-organization-26y","depends_on_id":"code-organization-3zo","type":"blocks","created_at":"2025-12-31T14:46:11.322835+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-26y","depends_on_id":"code-organization-bqd","type":"parent-child","created_at":"2025-12-31T14:46:11.417358+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-29i","title":"Create scratch template","description":"Create minimal scratch/ template. State=scratch. Just README.md.tmpl and optional description variable.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-14T12:06:22.227545+01:00","updated_at":"2025-12-14T12:49:14.114231+01:00","closed_at":"2025-12-14T12:49:14.114231+01:00","dependencies":[{"issue_id":"code-organization-29i","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:17:12.129636+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-29i","depends_on_id":"code-organization-bp8","type":"blocks","created_at":"2025-12-14T12:17:12.330945+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-2bw","title":"Git utilities: repo inspection","description":"Implement internal/git for lightweight git inspection: head commit, branch name, dirty status, last commit time. No external dependencies - use git CLI.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T18:34:22.983425+01:00","updated_at":"2025-12-13T18:47:56.760775+01:00","closed_at":"2025-12-13T18:47:56.760775+01:00","dependencies":[{"issue_id":"code-organization-2bw","depends_on_id":"code-organization-26h","type":"blocks","created_at":"2025-12-13T18:34:32.944468+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-2e2","title":"TUI: Bubble Tea dashboard","description":"Implement internal/tui with Bubble Tea. Project list with search/filter, details panel, keyboard navigation. Actions: open, archive, sync. Must feel instant with index.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-13T18:34:23.544777+01:00","updated_at":"2025-12-13T18:53:45.843283+01:00","closed_at":"2025-12-13T18:53:45.843283+01:00","dependencies":[{"issue_id":"code-organization-2e2","depends_on_id":"code-organization-33o","type":"blocks","created_at":"2025-12-13T18:34:33.496651+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-2j3","title":"EPIC: Polish \u0026 Documentation (Phase 5)","description":"TUI for partial selection and application, built-in partials (agent-setup, python-tooling, eslint, github-actions), comprehensive documentation in README, and extensive test coverage. The final polish to make partials production-ready.","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-31T14:40:48.963677+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T14:40:48.963677+01:00","dependencies":[{"issue_id":"code-organization-2j3","depends_on_id":"code-organization-bqd","type":"blocks","created_at":"2025-12-31T14:47:47.30115+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-2k0","title":"Add hidden files toggle to import browser","description":"Add '.' key to toggle showing hidden files (dotfiles). Default to hidden. When shown, include in tree. Persist preference in model state. Update tree display immediately on toggle.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-20T10:10:17.552014423+01:00","updated_at":"2025-12-20T18:10:01.628041341+01:00","closed_at":"2025-12-20T18:10:01.628041341+01:00","close_reason":"Added hidden files toggle with '.' key. Added showHidden field to model, modified buildSourceTree/loadSourceChildren/expandNode/toggleExpand to accept showHidden parameter. Default is hidden. Exceptions: .env, .gitignore, .git always show. Help text updated. Test added."}
{"id":"code-organization-2pm","title":"Add status messages and error display","description":"Show status messages (e.g., 'Import complete') and errors in dedicated area. Clear after timeout or next action. Use different colors for success/error. Include in model state.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:09:49.10138089+01:00","updated_at":"2025-12-20T10:19:20.112695974+01:00","closed_at":"2025-12-20T10:19:20.112695974+01:00","close_reason":"Status messages already implemented via message/messageIsError fields and displayed in details pane with error/success styling"}
{"id":"code-organization-2yl","title":"Implement hook execution with timeout","description":"Create RunHook() that executes bash script with environment. Parse timeout (e.g., '5m', '30s'). Capture stdout/stderr for display. Handle exit codes (0=success, non-zero=failure).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.996624+01:00","updated_at":"2025-12-14T12:23:41.098419+01:00","closed_at":"2025-12-14T12:23:41.098419+01:00","dependencies":[{"issue_id":"code-organization-2yl","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:27.299604+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-2yl","depends_on_id":"code-organization-9w5","type":"blocks","created_at":"2025-12-14T12:15:27.506845+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-33o","title":"co index command: generate index.jsonl","description":"Implement 'co index' - scans code_root, validates workspaces, computes metrics (commit dates, dirty flags, sizes), writes atomic index.jsonl. Use concurrent worker pool.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T18:34:23.173473+01:00","updated_at":"2025-12-13T18:49:32.335478+01:00","closed_at":"2025-12-13T18:49:32.335478+01:00","dependencies":[{"issue_id":"code-organization-33o","depends_on_id":"code-organization-cxz","type":"blocks","created_at":"2025-12-13T18:34:33.044096+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-33o","depends_on_id":"code-organization-2bw","type":"blocks","created_at":"2025-12-13T18:34:33.092038+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-33o","depends_on_id":"code-organization-0u7","type":"blocks","created_at":"2025-12-13T18:34:33.145394+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-33o","depends_on_id":"code-organization-ryu","type":"blocks","created_at":"2025-12-13T18:34:33.195269+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-3eh","title":"Add filtering/search for import browser tree","description":"Add '/' key to enter filter mode. Filter visible tree nodes by name. Highlight matching nodes. Press esc to clear filter. Reuse patterns from bubbles/list filtering or implement simple substring match.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-20T10:10:00.053614116+01:00","updated_at":"2025-12-20T18:14:08.272964509+01:00","closed_at":"2025-12-20T18:14:08.272964509+01:00","close_reason":"Added '/' key for filter mode with textinput. Implemented handleFilterKeys for input handling, applyFilter for case-insensitive substring matching. Filter shown in tree pane header. Help text updates for filter mode. Added test for filter functionality."}
{"id":"code-organization-3g6","title":"Implement details pane for selected folder","description":"Right pane shows details for selected folder: path, size, file count, git repos found inside (with branch/dirty info), non-git items found. Include action hints at bottom (i=import, s=stash, etc).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:08:34.50326933+01:00","updated_at":"2025-12-20T10:19:13.920846262+01:00","closed_at":"2025-12-20T10:19:13.920846262+01:00","close_reason":"Details pane already implemented in renderDetailsPane() showing name, path, type, git info (branch/dirty/remote), repo count, and action hints","dependencies":[{"issue_id":"code-organization-3g6","depends_on_id":"code-organization-46w","type":"blocks","created_at":"2025-12-20T10:11:28.519347834+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-3sx","title":"Create built-in partial: python-tooling","description":"Create the python-tooling partial:\n\nLOCATION: ~/Code/_system/partials/python-tooling/\n\npartial.json:\n{\n  \"schema\": 1,\n  \"name\": \"python-tooling\",\n  \"description\": \"Modern Python project tooling with ruff and pyproject.toml\",\n  \"version\": \"1.0.0\",\n  \"variables\": [\n    {\n      \"name\": \"python_version\",\n      \"description\": \"Python version\",\n      \"type\": \"string\",\n      \"default\": \"3.12\"\n    },\n    {\n      \"name\": \"package_name\",\n      \"description\": \"Package name\",\n      \"type\": \"string\",\n      \"default\": \"{{DIRNAME}}\"\n    },\n    {\n      \"name\": \"use_mypy\",\n      \"description\": \"Include mypy type checking\",\n      \"type\": \"boolean\",\n      \"default\": true\n    }\n  ],\n  \"conflicts\": {\n    \"strategy\": \"prompt\"\n  },\n  \"requires\": {\n    \"commands\": [\"python3\"]\n  },\n  \"tags\": [\"python\", \"tooling\", \"linting\"]\n}\n\nFILES TO CREATE:\nfiles/pyproject.toml.tmpl\n- Modern Python packaging\n- ruff configuration\n- mypy configuration (if use_mypy)\n- pytest configuration\n\nfiles/.python-version\n- Contains {{python_version}}\n\nfiles/ruff.toml\n- Ruff linter configuration\n- Line length, rules, etc.\n\nfiles/.gitignore.tmpl (or merge into existing)\n- __pycache__/\n- *.pyc\n- .venv/\n- .mypy_cache/\n- .pytest_cache/\n- dist/\n- *.egg-info/","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T14:46:56.971257+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:52:52.836935+01:00","closed_at":"2025-12-31T15:52:52.836935+01:00","close_reason":"Completed","dependencies":[{"issue_id":"code-organization-3sx","depends_on_id":"code-organization-2j3","type":"parent-child","created_at":"2025-12-31T14:47:47.436027+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-3zo","title":"Create internal/partial/merge.go - Format-specific merge implementations","description":"Implement merge strategies for supported file formats:\n\nSUPPORTED FORMATS:\n1. .gitignore (and similar: .dockerignore, .npmignore)\n   - Append unique lines from partial\n   - Preserve existing lines\n   - Remove duplicates\n   \n2. JSON files\n   - Deep merge: partial values override existing\n   - Preserve keys only in existing\n   - Handle nested objects recursively\n   - Arrays: configurable (replace vs append)\n   \n3. YAML files\n   - Same deep merge strategy as JSON\n   - Preserve comments where possible (best effort)\n   - Handle multi-document YAML (use first doc)\n\nFUNCTIONS:\n\nMergeGitignore(existing, partial []byte) ([]byte, error)\n- Parse both as line sets\n- Union unique lines\n- Preserve order: existing lines first, then new\n- Handle comments (lines starting with #)\n\nMergeJSON(existing, partial []byte) ([]byte, error)\n- Parse both as map[string]interface{}\n- Deep merge with partial overriding\n- Marshal back with consistent formatting (indent)\n- Preserve key order where possible\n\nMergeYAML(existing, partial []byte) ([]byte, error)\n- Parse both as map[string]interface{}\n- Same deep merge strategy\n- Marshal back to YAML\n\nMergeFile(existingPath, partialPath, destPath string) error\n- Detect format from extension\n- Call appropriate merge function\n- Write result to destPath (might be same as existingPath)\n\ndeepMerge(base, overlay map[string]interface{}) map[string]interface{}\n- Recursive merge helper\n- overlay values take precedence\n- Merge nested maps recursively\n- Arrays: replace (not merge) by default\n\nERROR HANDLING:\n- Return error if merge not possible (binary files, parse error)\n- Fall back to 'prompt' strategy on merge failure","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T14:45:18.545202+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:12:20.272412+01:00","closed_at":"2025-12-31T15:12:20.272412+01:00","close_reason":"Implemented merge.go functions","dependencies":[{"issue_id":"code-organization-3zo","depends_on_id":"code-organization-bqd","type":"parent-child","created_at":"2025-12-31T14:46:11.399337+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-407","title":"Epic: Template Explorer TUI for co template","description":"Running `co template` with no subcommands should launch a full-screen TUI for browsing templates across all configured template directories (primary + fallback), inspecting their manifests, browsing template/global files, viewing file contents, and opening files/dirs in the configured editor.\n\nThe TUI must also support creating a new workspace from the currently selected template: prompt for owner/project, prompt for required variables, confirm, then run creation (with dry-run/no-hooks options).\n\nThis epic focuses on MVP-quality UX + safe behavior; advanced features (rendered previews, diff/compare, etc.) are tracked separately.","design":"UI shape:\n- Tabs: Browse | Files | Create | Validate (hotkeys to switch)\n- Browse tab: template list (left) + details (right) including source dir\n- Files tab: file tree + content viewer\n- Create tab: owner/project inputs, options (dry-run/no-hooks), variable prompting, confirmation, run + result summary\n- Validate tab: validate selected/all and show errors with drill-down\n\nImplementation notes:\n- Use internal/config.Config.AllTemplatesDirs() for discovery\n- Extend internal/template helpers to return per-template source dir (and precedence)\n- Keep `co template list/show/validate` behavior unchanged","acceptance_criteria":"- `co template` (no args) opens the Template Explorer TUI\n- TUI lists templates from all template dirs and shows the selected template's source location\n- User can browse files and view file contents\n- User can open selected template/file in editor\n- User can create a workspace from the selected template via a dedicated tab/hotkey","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T16:11:54.973624+01:00","updated_at":"2025-12-14T18:38:18.463754+01:00","closed_at":"2025-12-14T18:38:18.463754+01:00"}
{"id":"code-organization-407.10","title":"Create tab: owner/project inputs + options","description":"Implement the Create tab UI state:\n- Owner and project text inputs (lowercase + slug validation)\n- Uses the currently selected template by default, with an option to change template from within Create tab\n- Options: dry-run toggle, no-hooks toggle\n- Clear CTA to proceed to variable prompting / confirmation\n\nThis task does not execute creation yet.","design":"Reuse patterns from internal/tui/new_prompt.go (textinput + focus management), but embed inside the Template Explorer program (no nested tea programs).\n\nSlug rules should match fs.IsValidWorkspaceSlug().","acceptance_criteria":"- User can enter owner/project and see validation errors inline\n- Create tab clearly shows selected template + source dir\n- Dry-run and no-hooks options are available\n- Switching away from Create tab preserves inputs/state","status":"closed","priority":1,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-14T16:19:11.203719+01:00","updated_at":"2025-12-14T18:14:48.910451+01:00","closed_at":"2025-12-14T18:14:48.910451+01:00","dependencies":[{"issue_id":"code-organization-407.10","depends_on_id":"code-organization-407","type":"parent-child","created_at":"2025-12-14T16:19:11.20425+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.10","depends_on_id":"code-organization-407.5","type":"blocks","created_at":"2025-12-14T16:25:57.359959+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.10","depends_on_id":"code-organization-407.4","type":"blocks","created_at":"2025-12-14T16:26:12.736774+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-407.11","title":"Create tab: variable prompting flow","description":"Add variable prompting after owner/project are set:\n- Load the selected template (from its source dir)\n- Compute builtin vars for the prospective workspace\n- Prompt for any required vars missing after considering defaults + builtins\n- Support variable types: string, boolean, choice, integer (consistent with existing variable prompt TUI)\n\nThis should be integrated into the Template Explorer TUI as a sub-state (not a separate program).","design":"Ideally refactor internal/tui/variable_prompt.go into a reusable component (model) so it can be embedded.\n\nEnsure template loading uses multi-dir lookup (LoadTemplateMulti) so fallback templates work.","acceptance_criteria":"- If template has no variables, flow skips prompting\n- Required vars without defaults are prompted; defaults are shown and can be accepted\n- Choice vars render as a selectable list\n- Cancel returns user to Create tab without side effects","status":"closed","priority":1,"issue_type":"task","estimated_minutes":240,"created_at":"2025-12-14T16:19:28.504747+01:00","updated_at":"2025-12-14T18:20:22.791503+01:00","closed_at":"2025-12-14T18:20:22.791503+01:00","dependencies":[{"issue_id":"code-organization-407.11","depends_on_id":"code-organization-407","type":"parent-child","created_at":"2025-12-14T16:19:28.505415+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.11","depends_on_id":"code-organization-407.10","type":"blocks","created_at":"2025-12-14T16:26:28.045057+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-407.12","title":"Create tab: confirm + run workspace creation","description":"Wire up execution of template-based workspace creation from the Create flow:\n- Show a confirmation screen summarizing what will happen (workspace slug/path, template + source, options, vars)\n- Run `template.CreateWorkspace` (or dry-run equivalent) with progress feedback\n- Display results (files created, repos created/cloned, hooks run, warnings)\n- Offer a one-key action to open the created workspace\n\nMust be safe: prevent overwriting existing workspace; handle errors without leaving the TUI in a broken state.","design":"Run creation behind a tea.Cmd; show spinner/progress message while running.\n\nReuse the same slug validation rules as `co new` and ensure hooks/no-hooks/dry-run options map to template.CreateOptions.","acceptance_criteria":"- Creating an existing workspace slug is blocked with a clear error\n- Dry-run mode does not write anything and still shows a useful summary\n- Non-dry-run mode creates workspace and shows results + warnings\n- Errors are surfaced and the user can return to Create tab and retry","status":"closed","priority":1,"issue_type":"task","estimated_minutes":240,"created_at":"2025-12-14T16:19:48.7757+01:00","updated_at":"2025-12-14T18:26:42.429321+01:00","closed_at":"2025-12-14T18:26:42.429321+01:00","dependencies":[{"issue_id":"code-organization-407.12","depends_on_id":"code-organization-407","type":"parent-child","created_at":"2025-12-14T16:19:48.776495+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.12","depends_on_id":"code-organization-407.11","type":"blocks","created_at":"2025-12-14T16:26:42.239654+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-407.13","title":"Validate tab: validate selected/all templates","description":"Add a Validate tab:\n- Validate the selected template (using template.ValidateTemplateDir against its source dir)\n- Optionally validate all templates in all dirs (deduped by precedence)\n- Display results list (✓/✗) and detailed error text for the selected result\n\nThis is a UI wrapper around existing validation functions.","design":"For per-template validate, call ValidateTemplateDir(sourceDir, templateName).\n\nFor validate all, iterate over the same listing used by the Browse tab so precedence is consistent.","acceptance_criteria":"- Validate selected works and shows detailed errors\n- Validate all runs and shows per-template results without crashing\n- Error output includes which file/hook is missing when applicable","status":"closed","priority":2,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-14T16:20:06.569507+01:00","updated_at":"2025-12-14T20:44:15.874716+01:00","closed_at":"2025-12-14T20:44:15.874716+01:00","dependencies":[{"issue_id":"code-organization-407.13","depends_on_id":"code-organization-407","type":"parent-child","created_at":"2025-12-14T16:20:06.570117+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.13","depends_on_id":"code-organization-407.5","type":"blocks","created_at":"2025-12-14T16:26:56.209884+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.13","depends_on_id":"code-organization-407.4","type":"blocks","created_at":"2025-12-14T16:27:10.124404+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-407.14","title":"Docs: co template TUI usage + keybindings","description":"Update documentation (README.md) to describe the new behavior:\n- `co template` launches the Template Explorer TUI\n- Basic navigation and tab hotkeys\n- Creating a workspace from a template via the Create tab\n- How template directories (primary + fallback) are searched and how location is shown","acceptance_criteria":"- README documents the new `co template` default behavior\n- Keybindings for the Template Explorer TUI are listed\n- Template search path + precedence is documented","status":"closed","priority":2,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-14T16:20:22.505341+01:00","updated_at":"2025-12-14T18:29:47.137837+01:00","closed_at":"2025-12-14T18:29:47.137837+01:00","dependencies":[{"issue_id":"code-organization-407.14","depends_on_id":"code-organization-407","type":"parent-child","created_at":"2025-12-14T16:20:22.506202+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.14","depends_on_id":"code-organization-407.3","type":"blocks","created_at":"2025-12-14T16:27:26.345257+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-407.15","title":"Testing template listing/source + global precedence","description":"Add/extend unit tests around the new template discovery helpers and any file-listing/mapping logic introduced for the Template Explorer TUI.\n\nFocus on deterministic behavior across multiple template dirs and on _global precedence.","acceptance_criteria":"- Tests cover multi-dir template precedence (first wins)\n- Tests cover source-dir reporting for templates\n- Tests cover _global merge precedence (first wins) where applicable","status":"closed","priority":2,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-14T16:20:39.611632+01:00","updated_at":"2025-12-14T18:16:03.806175+01:00","closed_at":"2025-12-14T18:16:03.806175+01:00","dependencies":[{"issue_id":"code-organization-407.15","depends_on_id":"code-organization-407","type":"parent-child","created_at":"2025-12-14T16:20:39.612267+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.15","depends_on_id":"code-organization-407.4","type":"blocks","created_at":"2025-12-14T16:27:40.692664+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-407.3","title":"Default co template to TUI","description":"Change the Cobra `template` command so running `co template` with no additional args launches the Template Explorer TUI.\n\nKeep existing subcommands (`list`, `show`, `validate`) unchanged and ensure `--help` behaves normally.","design":"Implementation sketch:\n- Add `RunE` to templateCmd for the no-args case.\n- Ensure help flag short-circuits as usual.\n- Optional: add explicit `co template tui` alias (nice-to-have).","acceptance_criteria":"- `co template` launches the Template Explorer TUI\n- `co template list|show|validate` behave exactly as before\n- `co template --help` prints help (does not enter TUI)","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-14T16:15:22.151831+01:00","updated_at":"2025-12-14T18:10:31.078399+01:00","closed_at":"2025-12-14T18:10:31.078399+01:00","dependencies":[{"issue_id":"code-organization-407.3","depends_on_id":"code-organization-407","type":"parent-child","created_at":"2025-12-14T16:15:22.152397+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.3","depends_on_id":"code-organization-407.5","type":"blocks","created_at":"2025-12-14T16:24:11.689803+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-407.4","title":"Template discovery across dirs with source location","description":"Extend internal/template discovery helpers so the Template Explorer TUI can list templates from *all* template directories (cfg.AllTemplatesDirs()), deduplicate by name (earlier dir wins), and show where each template came from.\n\nThis should be a reusable helper for CLI/TUI code (avoid scattering FindTemplateDir calls throughout the UI).","design":"Options:\n- Add `SourceDir`/`SourcePath` fields to `template.TemplateInfo` (backwards-compatible JSON add).\n- Or introduce a new type, e.g. `template.TemplateListing { Info TemplateInfo; SourceDir string; TemplateDir string; }` to avoid changing existing JSON.\n\nPrefer keeping TUI code dumb: feed it a slice of view models already containing `SourceDir` and computed paths.","acceptance_criteria":"- New helper returns template list with per-template source dir/path and precedence\n- Duplicate template names are resolved deterministically (earlier dir wins)\n- Includes _global detection info needed by the UI\n- Unit tests cover multi-dir precedence + source reporting","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-14T16:16:17.72973+01:00","updated_at":"2025-12-14T18:08:20.306358+01:00","closed_at":"2025-12-14T18:08:20.306358+01:00","dependencies":[{"issue_id":"code-organization-407.4","depends_on_id":"code-organization-407","type":"parent-child","created_at":"2025-12-14T16:16:17.731219+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-407.5","title":"Scaffold Template Explorer TUI (tabs + layout)","description":"Create the Bubble Tea model for the Template Explorer TUI, including:\n- Alt-screen program\n- Tab switching (Browse / Files / Create / Validate)\n- Keymap + help footer\n- Pane layout primitives (left list + right panel) with focus management\n\nThis task is about the shell and navigation, not full functionality.","design":"Implementation notes:\n- Follow internal/tui/tui.go patterns (list left, details right, help line).\n- Model state: activeTab, activePane, selectedTemplate, message/error.\n- Keep per-tab sub-models/types to avoid a giant Update() switch.","acceptance_criteria":"- `co template` opens a stable TUI shell with tab switching and a help footer\n- Window resize behaves correctly\n- Focus switching between panes works and is visually obvious\n- Code is structured so each tab can be implemented incrementally","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-14T16:16:35.93773+01:00","updated_at":"2025-12-14T18:10:30.977595+01:00","closed_at":"2025-12-14T18:10:30.977595+01:00","dependencies":[{"issue_id":"code-organization-407.5","depends_on_id":"code-organization-407","type":"parent-child","created_at":"2025-12-14T16:16:35.938648+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-407.6","title":"Browse tab: template list + details (incl source dir)","description":"Implement the Browse tab:\n- Left pane: filterable list of templates\n- Right pane: details panel for selected template (manifest summary)\n- Include template location (source dir/path), version/schema, counts, vars/repos/hooks summary.\n\nThis is the primary navigation surface.","design":"Use the output of the multi-dir discovery helper (see discovery task) so the UI does not need to re-stat templates for location.\n\nKeybindings should match existing TUI conventions:\n- j/k or arrows to move\n- / to filter\n- tab/h/l to switch focus","acceptance_criteria":"- Selecting a template updates details panel immediately\n- Details panel includes template location (which templates dir, and full path)\n- List supports fuzzy filtering/search\n- Handles no-templates case gracefully (shows searched dirs + hint)","status":"closed","priority":2,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-14T16:16:58.697713+01:00","updated_at":"2025-12-14T18:15:26.936863+01:00","closed_at":"2025-12-14T18:15:26.936863+01:00","dependencies":[{"issue_id":"code-organization-407.6","depends_on_id":"code-organization-407","type":"parent-child","created_at":"2025-12-14T16:16:58.698284+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.6","depends_on_id":"code-organization-407.4","type":"blocks","created_at":"2025-12-14T16:24:26.060849+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.6","depends_on_id":"code-organization-407.5","type":"blocks","created_at":"2025-12-14T16:24:41.572783+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-407.7","title":"Files tab: source tree browser (template + _global)","description":"Implement a Files tab that can browse the selected template's on-disk files:\n- Tree rooted at the template directory (show template.json, files/, hooks/)\n- Include a toggle/section for _global files (from all template dirs, honoring precedence)\n- Selecting a file drives the content viewer (implemented separately)\n\nThis tab is about file navigation, not rendering.","design":"Represent tree nodes with absolute paths + a stable display path.\n\nFor _global: consider a pseudo-root in the tree that lists merged global files with source badges.","acceptance_criteria":"- File tree shows directories/files and supports expand/collapse\n- Clearly indicates whether a file is from template vs _global (and which dir)\n- Works when template has no files/ or hooks/\n- Large template dirs remain responsive (no full-file reads in tree build)","status":"closed","priority":2,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-14T16:18:01.378995+01:00","updated_at":"2025-12-14T18:32:53.295863+01:00","closed_at":"2025-12-14T18:32:53.295863+01:00","dependencies":[{"issue_id":"code-organization-407.7","depends_on_id":"code-organization-407","type":"parent-child","created_at":"2025-12-14T16:18:01.379655+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.7","depends_on_id":"code-organization-407.4","type":"blocks","created_at":"2025-12-14T16:24:55.628186+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.7","depends_on_id":"code-organization-407.5","type":"blocks","created_at":"2025-12-14T16:25:11.432733+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-407.8","title":"Files tab: file content viewer (scroll + search)","description":"Add a right-pane file viewer to the Files tab:\n- Read and display selected file contents with scrolling\n- Line numbers + wrap toggle\n- In-file search (next/prev)\n- Guardrails for binary / huge files (show message instead of dumping bytes)\n\nInitially show raw file content; rendered template preview is tracked separately.","design":"Use bubbles viewport for scrolling. Keep file IO behind a tea.Cmd and cache content for quick back/forward.\n\nDefine a max file size for inline viewing (e.g. 1–2MB) and show the size in the warning.","acceptance_criteria":"- Viewing a file never blocks the UI (use streaming/async read if needed)\n- Large/binary files show a clear warning + metadata instead of raw bytes\n- User can scroll and search within the file\n- Works for files under template root and _global roots","status":"closed","priority":2,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-14T16:18:19.391044+01:00","updated_at":"2025-12-14T18:37:52.496113+01:00","closed_at":"2025-12-14T18:37:52.496113+01:00","dependencies":[{"issue_id":"code-organization-407.8","depends_on_id":"code-organization-407","type":"parent-child","created_at":"2025-12-14T16:18:19.391618+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.8","depends_on_id":"code-organization-407.7","type":"blocks","created_at":"2025-12-14T16:25:25.514938+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-407.9","title":"Open actions: open template/file in editor","description":"Add keybindings/actions to open:\n- Selected template root directory\n- Selected file (from Files tab)\n- The generated workspace after creation (from Create tab)\n\nUse configured editor when set; otherwise fall back to OS open behavior (macOS: `open`, Linux: print path or xdg-open if already used elsewhere).","design":"Prefer reusing the logic/pattern from cmd/co/cmd/open.go, but without importing cobra.\n\nIn Bubble Tea, opening should be a non-blocking tea.Cmd.","acceptance_criteria":"- One-key open works from Browse and Files tabs\n- Respects `config.Editor` when set\n- On macOS, opens via `open` when no editor configured\n- Failure cases show a non-crashing error message in the UI","status":"closed","priority":2,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-14T16:18:40.342874+01:00","updated_at":"2025-12-14T18:27:53.804488+01:00","closed_at":"2025-12-14T18:27:53.804488+01:00","dependencies":[{"issue_id":"code-organization-407.9","depends_on_id":"code-organization-407","type":"parent-child","created_at":"2025-12-14T16:18:40.343526+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-407.9","depends_on_id":"code-organization-407.5","type":"blocks","created_at":"2025-12-14T16:25:41.233607+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-408","title":"Sync: smarter excludes + interactive exclude picker","description":"Today co sync can transfer gigabytes of build artifacts/binaries because it effectively syncs the whole workspace. Add (1) a stronger built-in blacklist of common build/deps/cache dirs (Go/Rust/Node/Python/etc) and (2) an interactive TUI tree view that lets the user press space to exclude specific paths before syncing (applies to rsync + tar fallback).","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-17T08:26:47.551059092+01:00","updated_at":"2025-12-17T09:26:35.739843756+01:00","closed_at":"2025-12-17T09:26:35.739843756+01:00","close_reason":"Epic complete: All 9 subtasks closed. Implemented smarter excludes (50+ built-in patterns), interactive TUI picker with lazy loading, CLI flags (--exclude, --exclude-from, --include-env, --interactive), per-workspace persistence, rsync/tar parity tests, and updated docs."}
{"id":"code-organization-408.1","title":"Spec: sync exclude sources + precedence","description":"Write a concrete spec for how co sync computes the effective exclude list. Cover: built-in defaults, optional global config overrides, optional per-workspace overrides, CLI flags, and interactive picker output; define precedence + de-duping. Also define pattern semantics (dir-only vs file patterns), and how patterns map consistently to both rsync and tar transports.","acceptance_criteria":"Spec exists and includes examples for Go/Rust/Node workspaces plus at least 5 edge cases (dotfiles, symlinks, nested repos, path separators, trailing slashes).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T08:27:33.930616291+01:00","updated_at":"2025-12-17T09:13:21.238848059+01:00","closed_at":"2025-12-17T09:13:21.238848059+01:00","close_reason":"Spec created at docs/specs/sync-excludes-spec.md covering all acceptance criteria: exclude sources, precedence rules, pattern semantics, Go/Rust/Node examples, and 7+ edge cases","dependencies":[{"issue_id":"code-organization-408.1","depends_on_id":"code-organization-408","type":"parent-child","created_at":"2025-12-17T08:52:55.246254581+01:00","created_by":"import","metadata":"{}"}]}
{"id":"code-organization-408.2","title":"Sync: broaden built-in exclude blacklist","description":"Improve the built-in default excludes used by co sync so we stop transferring common build/deps/cache directories (Go/Rust/Node/Python/etc). Ensure the blacklist is directory-first (avoid excluding common file names like 'build' scripts) and is applied consistently for rsync and tar transports.","acceptance_criteria":"Default sync excludes include at least: node_modules/, vendor/, target/, dist/, build/, out/, bin/, obj/, coverage/, __pycache__/, .venv/, .cache/ (plus existing .DS_Store/*.log/.env rules). README's 'Default Excludes' matches implementation.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T08:27:45.903089509+01:00","updated_at":"2025-12-17T09:03:52.91960991+01:00","closed_at":"2025-12-17T09:03:52.91960991+01:00","close_reason":"Completed","dependencies":[{"issue_id":"code-organization-408.2","depends_on_id":"code-organization-408","type":"parent-child","created_at":"2025-12-17T08:52:55.248125153+01:00","created_by":"import","metadata":"{}"}]}
{"id":"code-organization-408.3","title":"Sync: CLI support for custom excludes","description":"Add explicit CLI controls for sync excludes: repeatable --exclude \u003cpattern\u003e (and optionally --exclude-from \u003cfile\u003e) so users can script/work around edge cases without the interactive picker.","acceptance_criteria":"co sync accepts --exclude multiple times; effective exclude list includes built-ins + CLI patterns (deduped). If --exclude-from is added, it supports one pattern per line and ignores blank lines + '#' comments.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T08:27:56.495275301+01:00","updated_at":"2025-12-17T09:19:33.376836701+01:00","closed_at":"2025-12-17T09:19:33.376836701+01:00","close_reason":"Implemented --exclude, --exclude-from, and --include-env CLI flags. Added fs/excludes.go with expanded builtin excludes and ExcludeList type. Updated sync.go to use new Options structure. All tests pass.","dependencies":[{"issue_id":"code-organization-408.3","depends_on_id":"code-organization-408","type":"parent-child","created_at":"2025-12-17T08:52:55.24957844+01:00","created_by":"import","metadata":"{}"}]}
{"id":"code-organization-408.4","title":"Sync: interactive exclude picker TUI","description":"Add co sync --interactive (-i): before syncing, launch a Bubble Tea TUI that shows the workspace filesystem as a collapsible tree. Space toggles exclude/include for the selected path (dirs exclude entire subtree). Default excludes start pre-selected. After confirmation, run sync with the selected exclude list (applies to rsync + tar fallback).","acceptance_criteria":"Interactive mode supports: expand/collapse dirs, toggle exclude with space, clear/reset, confirm-to-sync, and cancel. Excluding a directory prevents syncing anything under it.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T08:28:04.574960871+01:00","updated_at":"2025-12-17T09:20:42.272213132+01:00","closed_at":"2025-12-17T09:20:42.272213132+01:00","close_reason":"Interactive exclude picker TUI implemented with: expand/collapse dirs (h/l), toggle exclude (space), clear (c), reset (r), confirm (enter), cancel (q/esc). Directory exclusions propagate to children.","dependencies":[{"issue_id":"code-organization-408.4","depends_on_id":"code-organization-408","type":"parent-child","created_at":"2025-12-17T08:52:55.251015132+01:00","created_by":"import","metadata":"{}"}]}
{"id":"code-organization-408.5","title":"Sync picker: lazy file tree + performance guardrails","description":"Implement the filesystem tree backing the interactive sync picker in a way that scales: lazy-load directory children on expand (no full recursive walk), avoid following symlinks, and ensure excluded directories are not traversed. Prefer non-blocking loads via tea.Cmd where needed.","acceptance_criteria":"Picker initial render does not recursively enumerate the whole workspace; expanding a dir reads only that dir. Symlink loops cannot hang the UI. Large directories don't freeze the UI (either async load or entry caps with a notice).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T08:28:13.39621231+01:00","updated_at":"2025-12-17T09:25:39.118643286+01:00","closed_at":"2025-12-17T09:25:39.118643286+01:00","close_reason":"Completed","dependencies":[{"issue_id":"code-organization-408.5","depends_on_id":"code-organization-408","type":"parent-child","created_at":"2025-12-17T08:52:55.252434138+01:00","created_by":"import","metadata":"{}"}]}
{"id":"code-organization-408.6","title":"Sync: persist per-workspace exclude patterns","description":"Add a way to persist sync excludes per workspace (likely in project.json) and have co sync automatically include them. Interactive picker should optionally offer 'save for next time' so users don't need to re-select exclusions every run.","acceptance_criteria":"When project.json defines sync excludes, co sync uses them by default. Interactive picker can save updated excludes and they are picked up on subsequent sync runs.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T08:28:19.835130935+01:00","updated_at":"2025-12-17T09:26:21.60507413+01:00","closed_at":"2025-12-17T09:26:21.60507413+01:00","close_reason":"Per-workspace excludes: SyncConfig/ExcludeConfig in project.json model, sync command loads workspace config, interactive picker 'S' key saves selections. README updated with per-workspace exclude docs.","dependencies":[{"issue_id":"code-organization-408.6","depends_on_id":"code-organization-408","type":"parent-child","created_at":"2025-12-17T08:52:55.253885342+01:00","created_by":"import","metadata":"{}"}]}
{"id":"code-organization-408.7","title":"Sync: ensure rsync + tar exclude semantics match","description":"Audit and, if needed, adjust how excludes are passed to rsync (--exclude=…) vs tar (--exclude=…). In particular, confirm that interactive picker-generated relative paths and dir-only patterns behave the same in both transports (including nested paths, trailing slashes, and dotfiles).","acceptance_criteria":"Documented/verified behavior for at least 10 representative patterns; automated tests exist where practical (unit tests for pattern normalization + at least one integration smoke test gated by tool availability).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T08:28:27.170230956+01:00","updated_at":"2025-12-17T09:21:37.28491095+01:00","closed_at":"2025-12-17T09:21:37.28491095+01:00","close_reason":"Added 15 test cases for pattern normalization covering directories, globs, exact files, path patterns, dotfiles, and nested paths. Tests in internal/fs/excludes_test.go verify rsync and tar exclude semantics match.","dependencies":[{"issue_id":"code-organization-408.7","depends_on_id":"code-organization-408","type":"parent-child","created_at":"2025-12-17T08:52:55.255260001+01:00","created_by":"import","metadata":"{}"}]}
{"id":"code-organization-408.8","title":"Docs: update Remote Sync section for new excludes + interactive mode","description":"Update README.md Remote Sync docs to reflect the expanded default excludes and the new interactive picker (flags, keybindings, persistence behavior if added). Keep docs consistent with implementation.","acceptance_criteria":"README Remote Sync section documents: default excludes, --interactive usage + keybindings, and how to configure/override excludes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T08:28:32.062134603+01:00","updated_at":"2025-12-17T09:22:15.199444464+01:00","closed_at":"2025-12-17T09:22:15.199444464+01:00","close_reason":"Updated README Remote Sync section with: expanded default excludes table by category, all new CLI flags (--interactive, --list-excludes, --include-env), and interactive mode keybindings.","dependencies":[{"issue_id":"code-organization-408.8","depends_on_id":"code-organization-408","type":"parent-child","created_at":"2025-12-17T08:52:55.256663424+01:00","created_by":"import","metadata":"{}"}]}
{"id":"code-organization-408.9","title":"Sync: reconcile --include-env docs vs implementation","description":"README documents a --include-env flag but co sync currently only supports --force/--dry-run/--no-git. Decide whether to implement --include-env (to override default .env excludes) or update docs accordingly; ensure behavior also integrates with interactive picker.","acceptance_criteria":"Either: (a) co sync supports --include-env and it overrides default .env/.env.* excludes, or (b) README no longer advertises the flag. Interactive mode remains consistent.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T08:28:43.885262378+01:00","updated_at":"2025-12-17T09:19:39.141835784+01:00","closed_at":"2025-12-17T09:19:39.141835784+01:00","close_reason":"Implemented --include-env flag that overrides default .env/.env.* excludes. README docs match implementation.","dependencies":[{"issue_id":"code-organization-408.9","depends_on_id":"code-organization-408","type":"parent-child","created_at":"2025-12-17T08:52:55.257567849+01:00","created_by":"import","metadata":"{}"}]}
{"id":"code-organization-43w","title":"Integrate extra files picker into import flow","description":"After config, if non-git items exist, transition to StateExtraFiles. Reuse FindNonGitItems() and embed extra_files_picker patterns or call RunExtraFilesPicker() inline. Handle destination subfolder prompt.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:08:46.287823918+01:00","updated_at":"2025-12-20T10:30:49.996263701+01:00","closed_at":"2025-12-20T10:30:49.996263701+01:00","close_reason":"Integrated extra files picker into import browser with file selection, destination prompt, and preview display","dependencies":[{"issue_id":"code-organization-43w","depends_on_id":"code-organization-ues","type":"blocks","created_at":"2025-12-20T10:11:33.664199836+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-46w","title":"Create import_browser.go with two-pane layout","description":"Create internal/tui/import_browser.go with left pane showing source folder tree and right pane showing details/actions for selected item. Follow patterns from tui.go (workspace browser) and template_explorer.go. Include pane switching with h/l keys.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T10:08:24.737493026+01:00","updated_at":"2025-12-20T10:18:56.068100507+01:00","closed_at":"2025-12-20T10:18:56.068100507+01:00","close_reason":"Created ImportBrowserModel with two-pane layout (tree + details), styles, Init/Update/View methods, keyboard navigation, pane switching with h/l/tab, and RunImportBrowser() entry point","dependencies":[{"issue_id":"code-organization-46w","depends_on_id":"code-organization-pgc","type":"blocks","created_at":"2025-12-20T10:11:23.598411339+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-46w","depends_on_id":"code-organization-py5","type":"blocks","created_at":"2025-12-20T10:11:28.356784632+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-48g","title":"Create template selection TUI component","description":"Create internal/tui/template_select.go with list of templates plus 'No template' option. Return selected template name or empty string.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:21.813215+01:00","updated_at":"2025-12-14T12:41:12.655245+01:00","closed_at":"2025-12-14T13:15:00+01:00","dependencies":[{"issue_id":"code-organization-48g","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:17:11.617086+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-48g","depends_on_id":"code-organization-9tx","type":"blocks","created_at":"2025-12-14T12:17:11.765396+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-4dl","title":"Implement global files processing","description":"Create ProcessGlobalFiles() to copy _global/ files to workspace. Apply variable substitution to .tmpl files. Support skip_global_files option (bool or []string).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.731346+01:00","updated_at":"2025-12-14T12:22:14.039181+01:00","closed_at":"2025-12-14T12:22:14.039181+01:00","dependencies":[{"issue_id":"code-organization-4dl","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:26.845333+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-4dl","depends_on_id":"code-organization-pn1","type":"blocks","created_at":"2025-12-14T12:15:27.096631+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-57n","title":"Add size calculation for folders in details pane","description":"Calculate folder size using fs.CalculateSize() or similar. Show in details pane. Cache results to avoid repeated calculations. Show 'calculating...' while async operation runs. Handle large folders gracefully.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-20T10:10:12.209150829+01:00","updated_at":"2025-12-20T18:04:59.809955355+01:00","closed_at":"2025-12-20T18:04:59.809955355+01:00","close_reason":"Added size calculation to details pane with caching. Added formatSize() for human-readable formatting, getOrCalculateSize() with caching, and updated renderDetailsPane() to show Size field. Async calculation deferred as synchronous is responsive enough with caching."}
{"id":"code-organization-5dr","title":"Create chunker interface and language detection","description":"Create internal/chunker/chunker.go with Chunker interface, Config struct, language detection by file extension (DetectLanguage), IsIndexableFile helper, and EstimateTokens utility.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T22:55:41.848171+01:00","updated_at":"2025-12-13T22:57:28.873672+01:00","closed_at":"2025-12-13T22:57:28.873672+01:00","dependencies":[{"issue_id":"code-organization-5dr","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:38.303528+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-5i9","title":"Create internal/partial/loader.go - Discovery and loading","description":"Implement partial discovery, loading, and validation:\n\nDISCOVERY FUNCTIONS:\n- ListPartials(dirs []string) ([]PartialInfo, error): Scan directories for partials, return info with Name, Description, FilesCount, VarsCount, Tags, SourceDir\n- FindPartial(name string, dirs []string) (string, error): Find partial path by name across directories (first match wins)\n- PartialInfo struct: Name, Description, Path, SourceDir, FilesCount, VarsCount, Tags\n\nLOADING FUNCTIONS:\n- LoadPartial(partialPath string) (*Partial, error): Load and parse partial.json from directory\n- parseManifest(data []byte, path string) (*Partial, error): JSON unmarshaling with validation\n\nVALIDATION FUNCTIONS:\n- ValidatePartial(p *Partial) error: Comprehensive validation\n  - Schema version must be 1\n  - Name must match ^[a-z0-9][a-z0-9-]*$\n  - Description required\n  - Variables have valid types, required have no defaults, choices non-empty for choice type\n  - ConflictStrategy is valid enum value\n  - Hook paths exist (relative to partial dir)\n\nDIRECTORY SCANNING:\n- Scan for directories containing partial.json\n- Skip hidden directories, _global (not used for partials)\n- Handle both primary and fallback directories\n- Earlier directories take precedence (like templates)\n\nFollow patterns from internal/template/loader.go closely.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:41:29.629712+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T14:57:13.693937+01:00","closed_at":"2025-12-31T14:57:13.693937+01:00","close_reason":"loader.go already fully implemented with all required functions","dependencies":[{"issue_id":"code-organization-5i9","depends_on_id":"code-organization-605","type":"blocks","created_at":"2025-12-31T14:42:15.518016+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-5i9","depends_on_id":"code-organization-kws","type":"blocks","created_at":"2025-12-31T14:42:15.535899+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-5i9","depends_on_id":"code-organization-g6j","type":"parent-child","created_at":"2025-12-31T14:42:23.012876+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-5je","title":"Add test runbook to agent-setup partial","description":"Create agent_docs/runbooks/test.md.tmpl and update AGENTS/README templates to reference it","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T16:02:53.134219+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T16:03:37.108795+01:00","closed_at":"2025-12-31T16:03:37.108795+01:00","close_reason":"Completed","dependencies":[{"issue_id":"code-organization-5je","depends_on_id":"code-organization-2j3","type":"discovered-from","created_at":"2025-12-31T16:02:53.135119+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-605","title":"Create internal/partial/partial.go - Core types and constants","description":"Define the foundational data structures for partials:\n\nSTRUCTS TO CREATE:\n- Partial: Main struct with Schema, Name, Description, Version, Variables, Files, Conflicts, Hooks, Tags, Requires\n- PartialVar: Variable definition with Name, Description, Type, Required, Default, Validation, Choices (reuse VarType from template)\n- PartialFiles: Include, Exclude patterns, TemplateExtensions\n- ConflictConfig: Strategy (prompt|skip|overwrite|backup|merge), Preserve patterns\n- PartialHooks: PreApply, PostApply (reuse HookSpec from template)\n- Requirements: Commands, Files arrays for prerequisites\n- ApplyOptions: PartialName, TargetPath, Variables map, ConflictStrategy, DryRun, NoHooks, Force, Yes flags\n- ApplyResult: PartialName, TargetPath, FilesCreated/Skipped/Overwritten/Merged/BackedUp lists, HooksRun, Warnings\n\nCONSTANTS:\n- ConflictStrategy constants: StrategyPrompt, StrategySkip, StrategyOverwrite, StrategyBackup, StrategyMerge\n- Default values: DefaultConflictStrategy = StrategyPrompt\n\nVALIDATION:\n- Partial name regex: ^[a-z0-9][a-z0-9-]*$ (no reserved names like _global)\n- Schema version validation (currently 1)\n\nMirror the structure in internal/template/template.go but adapted for partial-specific concerns.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:41:04.338592+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T14:53:22.345225+01:00","closed_at":"2025-12-31T14:53:22.345225+01:00","close_reason":"Created internal/partial/partial.go with all core types and constants","dependencies":[{"issue_id":"code-organization-605","depends_on_id":"code-organization-g6j","type":"parent-child","created_at":"2025-12-31T14:42:22.976581+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-67s","title":"Implement merge strategy in Apply","description":"Use MergeFile for ActionMerge in partial.Apply and record merged files; stop skipping merges","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T16:17:29.264846+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T16:17:29.264846+01:00","dependencies":[{"issue_id":"code-organization-67s","depends_on_id":"code-organization-2j3","type":"discovered-from","created_at":"2025-12-31T16:17:29.265679+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-6cl","title":"Add symlink handling to source tree","description":"Detect symlinks in source tree using os.ModeSymlink. Show different icon/indicator for symlinks. Skip following symlinks during tree expansion to prevent infinite loops. Show target path in details.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-20T10:10:09.791509501+01:00","updated_at":"2025-12-20T18:11:03.493648623+01:00","closed_at":"2025-12-20T18:11:03.493648623+01:00","close_reason":"Symlink handling was already implemented (IsSymlink field, ModeSymlink detection, ibSymlinkStyle, arrow indicator, no follow on expand). Added symlink target path display in details pane using os.Readlink()."}
{"id":"code-organization-6cy","title":"Add 'co vector search' subcommand","description":"Implement vectorSearchCmd: text query, --file for file-based query, --limit, --min-score, --content, --paths-only, --json output modes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T22:55:58.484359+01:00","updated_at":"2025-12-13T22:57:36.879738+01:00","closed_at":"2025-12-13T22:57:36.879738+01:00","dependencies":[{"issue_id":"code-organization-6cy","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:49.112653+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-6cy","depends_on_id":"code-organization-imo","type":"blocks","created_at":"2025-12-13T22:57:08.537952+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-6ea","title":"Extract reusable stashFolder to internal package","description":"Move stashFolder() logic from cmd/co/cmd/stash.go to internal package (e.g., internal/archive/stash.go). Export as StashFolder(). Update stash command to use new location. Enables reuse from TUI.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T10:10:02.83052035+01:00","updated_at":"2025-12-20T10:25:06.752207052+01:00","closed_at":"2025-12-20T10:25:06.752207052+01:00","close_reason":"Updated stash.go to use archive.StashFolder() from internal/archive package"}
{"id":"code-organization-6hy","title":"Create internal/partial/apply.go - Main apply logic","description":"Main orchestration for applying partials:\n\nCORE FUNCTION:\nApply(opts ApplyOptions) (*ApplyResult, error)\n- Main entry point for partial application\n\nFLOW:\n1. Load partial from name (via loader.FindPartial + LoadPartial)\n2. Validate target directory exists (or create with --force?)\n3. Resolve variables (user-provided + defaults + builtins)\n4. Validate all required variables are provided\n5. Scan partial files (via ScanPartialFiles)\n6. Detect conflicts (via DetectConflicts)\n7. If DryRun: return result without writing\n8. Execute pre_apply hook (if not NoHooks)\n9. Process each file according to its action:\n   - Create: ProcessFile\n   - Skip: log and continue\n   - Overwrite: ProcessFile (overwrites existing)\n   - Backup: ExecuteBackup then ProcessFile\n   - Merge: defer to merge.go (Phase 4, skip for now)\n10. Execute post_apply hook (if not NoHooks)\n11. Build and return ApplyResult\n\nHELPER FUNCTIONS:\n- validateTarget(path string) error: Check directory exists and is writable\n- buildFileEnv(files *ApplyResult) map[string]string: Build CO_FILES_* env vars for hooks\n\nDRY RUN OUTPUT:\n- Return ApplyResult with all fields populated\n- FilesCreated etc. contain what WOULD happen\n- Caller (CLI) formats output\n\nERROR HANDLING:\n- Partial failures: some files written, some not\n- Log which files succeeded\n- Return error with context about partial state\n- Suggest re-running with --conflict skip\n\nThis does NOT include:\n- Interactive prompting (Phase 3)\n- Merge strategy execution (Phase 4)\n- Hook execution (Phase 3 - stub for now)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:43:10.166614+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:07:48.413379+01:00","closed_at":"2025-12-31T15:07:48.413379+01:00","close_reason":"Implemented Apply() function with resolveVariables(), validateVariables(), populateDryRunResult(), and getPartialBuiltins() helpers. Build passes and all 46 tests pass.","dependencies":[{"issue_id":"code-organization-6hy","depends_on_id":"code-organization-t60","type":"blocks","created_at":"2025-12-31T14:43:49.010262+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-6hy","depends_on_id":"code-organization-9y0","type":"blocks","created_at":"2025-12-31T14:43:49.027758+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-6hy","depends_on_id":"code-organization-pzq","type":"parent-child","created_at":"2025-12-31T14:43:49.131792+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-6lj","title":"Add template variable prompting to import flow","description":"If template selected and has variables, prompt for values. Reuse RunVariablePrompt() or embed variable_prompt patterns. Store values for execution. Skip if no variables needed.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-20T10:09:27.9725336+01:00","updated_at":"2025-12-21T08:06:24.248360325+01:00","closed_at":"2025-12-21T08:06:24.248360325+01:00","close_reason":"Verified and tested template variable prompting implementation - StateTemplateVars state, variable prompting UI with text/boolean/choice inputs, integration after template selection, and added unit tests","dependencies":[{"issue_id":"code-organization-6lj","depends_on_id":"code-organization-dbu","type":"blocks","created_at":"2025-12-20T10:11:52.646501917+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-6r6","title":"Implement variable dependency graph and cycle detection","description":"Build dependency graph from variable defaults that reference other variables. Implement topological sort. Detect and report cycles with clear error: 'Circular variable reference: a → b → a'.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.323263+01:00","updated_at":"2025-12-14T12:21:16.88775+01:00","closed_at":"2025-12-14T12:21:16.88775+01:00","dependencies":[{"issue_id":"code-organization-6r6","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:26.224511+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-6r6","depends_on_id":"code-organization-yn2","type":"blocks","created_at":"2025-12-14T12:15:26.483515+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-6vz","title":"Add post-import options: stash or delete source","description":"After successful import, offer options: keep source folder, stash source (archive), or delete source. Show confirmation for destructive options. Execute chosen action before completing.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:08:56.399197345+01:00","updated_at":"2025-12-20T11:02:28.222676061+01:00","closed_at":"2025-12-20T11:02:28.222676061+01:00","close_reason":"Implemented StatePostImport with 3 options: keep source, stash (archive+delete), or delete. Shows warning for destructive options. Executes action and refreshes tree.","dependencies":[{"issue_id":"code-organization-6vz","depends_on_id":"code-organization-0ce","type":"blocks","created_at":"2025-12-20T10:11:38.378386222+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-787","title":"Create internal/partial/hooks.go - Hook execution","description":"Implement lifecycle hooks for partials:\n\nHOOK TYPES:\n- HookTypePreApply: Runs before any files are written\n- HookTypePostApply: Runs after all files are written\n\nENVIRONMENT VARIABLES FOR HOOKS:\nStandard:\n- CO_PARTIAL_NAME: Name of the partial being applied\n- CO_PARTIAL_PATH: Absolute path to partial directory\n- CO_TARGET_PATH: Absolute path to target directory\n- CO_TARGET_DIRNAME: Name of target directory\n- CO_DRY_RUN: 'true' or 'false'\n- CO_VERBOSE: 'true' or 'false' (future)\n\nGit info (if target is git repo):\n- CO_IS_GIT_REPO: 'true' or 'false'\n- CO_GIT_REMOTE_URL: Remote URL\n- CO_GIT_BRANCH: Current branch\n\nUser variables (prefixed):\n- CO_VAR_\u003cname\u003e=\u003cvalue\u003e for each variable\n\nFile results (post_apply only):\n- CO_FILES_CREATED: Newline-separated list\n- CO_FILES_SKIPPED: Newline-separated list\n- CO_FILES_OVERWRITTEN: Newline-separated list\n- CO_FILES_MERGED: Newline-separated list\n- CO_FILES_BACKED_UP: Newline-separated list\n\nTYPES:\ntype PartialHookEnv struct {\n    PartialName   string\n    PartialPath   string\n    TargetPath    string\n    TargetDirname string\n    DryRun        bool\n    IsGitRepo     bool\n    GitRemoteURL  string\n    GitBranch     string\n    Variables     map[string]string\n    Result        *ApplyResult  // Only for post_apply\n}\n\nFUNCTIONS:\n\nBuildPartialHookEnv(env PartialHookEnv) []string\n- Build environment variable slice from struct\n- Add CO_VAR_ prefixed user variables\n- Add file lists for post_apply\n\nRunPartialHook(hookType string, spec template.HookSpec, partialPath string, env PartialHookEnv, output io.Writer) (*template.HookResult, error)\n- Delegate to template.RunHook with partial-specific env\n- Handle both string and object hook specs\n- Support workdir relative to partial directory\n- Timeout enforcement (from template package)\n\nHOOK EXECUTION:\n- pre_apply: Validation, prerequisite checks\n  - If fails (exit != 0): abort apply, no files written\n- post_apply: Post-setup commands\n  - If fails: log warning, apply is still considered successful\n  - Files are already written","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T14:44:22.472069+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:21:44.869597+01:00","closed_at":"2025-12-31T15:21:44.869597+01:00","close_reason":"Implemented hooks.go with BuildPartialHookEnv, RunPartialHook, and all helper functions. All tests pass.","dependencies":[{"issue_id":"code-organization-787","depends_on_id":"code-organization-8mo","type":"blocks","created_at":"2025-12-31T14:45:02.961298+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-787","depends_on_id":"code-organization-i39","type":"parent-child","created_at":"2025-12-31T14:45:03.079353+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-78l","title":"Add add-to-workspace mode for import browser","description":"Add 'a' key to add repos to existing workspace. Show workspace selector (reuse repo_select patterns with workspaces). Skip owner/project input. Validate workspace exists. Proceed to extra files and preview.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:09:07.147260066+01:00","updated_at":"2025-12-20T11:09:02.115135669+01:00","closed_at":"2025-12-20T11:09:02.115135669+01:00","close_reason":"Implemented add-to-workspace mode with 'a' key handler, workspace selection view, and executeAddToWorkspace using workspace.AddToWorkspace()","dependencies":[{"issue_id":"code-organization-78l","depends_on_id":"code-organization-169","type":"blocks","created_at":"2025-12-20T10:11:43.233852707+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-7ow","title":"Add lazy loading for source tree directories","description":"Implement loadChildren() method on sourceNode. Only load when directory is expanded. Follow patterns from exclude_picker.go loadChildren(). Cap entries at maxDirEntries (500). Handle symlinks. Show placeholder for truncated lists.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:08:15.320064466+01:00","updated_at":"2025-12-20T10:15:20.064778186+01:00","closed_at":"2025-12-20T10:15:20.064778186+01:00","close_reason":"Lazy loading implemented in loadSourceChildren() - children are loaded on-demand when expandNode() is called. Includes maxSourceDirEntries cap (500), symlink handling, and placeholder for truncated lists.","dependencies":[{"issue_id":"code-organization-7ow","depends_on_id":"code-organization-bxx","type":"blocks","created_at":"2025-12-20T10:11:20.960070425+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-80n","title":"Extend internal/config/config.go - Add partials directories","description":"Add methods to Config struct for partials directory resolution:\n\nNEW METHODS:\n- PartialsDir() string: Return primary partials directory\n  filepath.Join(c.SystemDir(), 'partials')\n  \n- FallbackPartialsDir() string: Return XDG config partials directory\n  Same pattern as FallbackTemplatesDir():\n  - Check XDG_CONFIG_HOME, else ~/.config\n  - Return filepath.Join(xdgConfig, 'co', 'partials')\n  \n- AllPartialsDirs() []string: Return all partial directories to search in priority order\n  []string{c.PartialsDir(), c.FallbackPartialsDir()}\n\nTESTS:\n- Add tests to config_test.go for the new methods\n- Test with XDG_CONFIG_HOME set and unset\n- Verify priority order\n\nThis follows exactly the same pattern as TemplatesDir(), FallbackTemplatesDir(), AllTemplatesDirs().","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:41:40.977714+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T14:57:17.940619+01:00","closed_at":"2025-12-31T14:57:17.940619+01:00","close_reason":"Config methods PartialsDir, FallbackPartialsDir, AllPartialsDirs already implemented","dependencies":[{"issue_id":"code-organization-80n","depends_on_id":"code-organization-g6j","type":"parent-child","created_at":"2025-12-31T14:42:23.030922+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-86l","title":"co ls and co show commands","description":"Implement 'co ls [--json] [--owner] [--state] [--tag]' and 'co show \u003cslug\u003e [--json]' for listing and viewing workspace details.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T18:34:23.268352+01:00","updated_at":"2025-12-13T18:50:28.650315+01:00","closed_at":"2025-12-13T18:50:28.650315+01:00","dependencies":[{"issue_id":"code-organization-86l","depends_on_id":"code-organization-33o","type":"blocks","created_at":"2025-12-13T18:34:33.24809+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-8mc","title":"Write integration tests for template creation","description":"Test full creation flow with test templates. Verify files created, variables substituted, hooks executed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:22.432825+01:00","updated_at":"2025-12-14T13:17:44.123886+01:00","closed_at":"2025-12-14T15:20:00+01:00","dependencies":[{"issue_id":"code-organization-8mc","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:17:12.475979+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-8mc","depends_on_id":"code-organization-m7u","type":"blocks","created_at":"2025-12-14T12:17:12.620046+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-8mo","title":"Create internal/partial/variables.go - Partial-specific built-in variables","description":"Implement partial-specific variable resolution:\n\nBUILT-IN VARIABLES:\nStandard (from template package):\n- {{GIT_USER_NAME}}: git config user.name\n- {{GIT_USER_EMAIL}}: git config user.email  \n- {{YEAR}}: Current year (2025)\n- {{DATE}}: Current date (YYYY-MM-DD)\n- {{TIMESTAMP}}: Unix timestamp\n\nPartial-specific (NEW):\n- {{DIRNAME}}: Name of target directory (e.g., 'backend')\n- {{DIRPATH}}: Absolute path to target directory\n- {{PARENT_DIRNAME}}: Name of parent directory (e.g., 'repos')\n- {{IS_GIT_REPO}}: 'true' if target is a git repository\n- {{GIT_REMOTE_URL}}: Git remote origin URL (if git repo, else empty)\n- {{GIT_BRANCH}}: Current git branch (if git repo, else empty)\n\nFUNCTIONS:\n\nGetPartialBuiltins(targetPath string) (map[string]string, error)\n- Build map of all built-in variables\n- Use internal/git package for git info:\n  - git.IsRepo(targetPath)\n  - git.GetInfo(targetPath) for branch, remote, etc.\n- Handle non-git directories gracefully (empty git vars)\n\nResolvePartialVariables(p *Partial, provided, builtins map[string]string) (map[string]string, error)\n- Merge builtins with user-provided variables\n- Apply defaults for non-provided variables\n- Substitute built-ins in defaults (e.g., default: '{{DIRNAME}}')\n- Validate all required variables have values\n- Validate variable values against type and validation regex\n- Return complete variable map\n\nDELEGATION:\n- Use template.ValidateVarValue for validation\n- Use template.ProcessTemplateContent for substitution in defaults\n- Adapt template.ResolveVariables pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T14:44:05.587591+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:28:11.988407+01:00","closed_at":"2025-12-31T15:28:11.988407+01:00","close_reason":"Completed","dependencies":[{"issue_id":"code-organization-8mo","depends_on_id":"code-organization-i39","type":"parent-child","created_at":"2025-12-31T14:45:03.059858+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-8mp","title":"Audit built-in partials for spec alignment","description":"Review agent-setup/python-tooling/eslint/github-actions partials for alignment with spec and note any mismatches to agents","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T16:05:40.466512+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T16:06:27.525315+01:00","closed_at":"2025-12-31T16:06:27.525315+01:00","close_reason":"Completed","dependencies":[{"issue_id":"code-organization-8mp","depends_on_id":"code-organization-2j3","type":"discovered-from","created_at":"2025-12-31T16:05:40.467302+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-8pq","title":"co sync command: remote workspace sync","description":"Implement 'co sync \u003cslug\u003e \u003cserver\u003e [--force] [--dry-run] [--no-git]'. Remote existence check, rsync transport with excludes, tar fallback. Exit code 10 if exists without --force.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T18:34:23.368008+01:00","updated_at":"2025-12-13T18:51:19.619394+01:00","closed_at":"2025-12-13T18:51:19.619394+01:00","dependencies":[{"issue_id":"code-organization-8pq","depends_on_id":"code-organization-ryu","type":"blocks","created_at":"2025-12-13T18:34:33.297477+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-8pq","depends_on_id":"code-organization-0u7","type":"blocks","created_at":"2025-12-13T18:34:33.34508+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-8qs","title":"Write unit tests for file processing","description":"Test pattern matching, template expansion, .tmpl extension handling, global file override.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:22.368029+01:00","updated_at":"2025-12-14T12:56:49.271712+01:00","closed_at":"2025-12-14T12:56:49.271712+01:00","dependencies":[{"issue_id":"code-organization-8qs","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:17:12.427154+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-8qs","depends_on_id":"code-organization-atq","type":"blocks","created_at":"2025-12-14T12:17:12.57322+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-8rv","title":"Create template error types (internal/template/errors.go)","description":"Define custom error types: TemplateNotFoundError, InvalidManifestError, MissingRequiredVarError, InvalidVarValueError, CyclicVariableError, HookError. Follow existing error patterns in codebase.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.034404+01:00","updated_at":"2025-12-14T12:18:19.146523+01:00","closed_at":"2025-12-14T12:18:19.146523+01:00","dependencies":[{"issue_id":"code-organization-8rv","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:25.911001+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-9b1","title":"Extract import execution logic to internal package","description":"Extract core import logic from cmd/co/cmd/import.go to internal package (e.g., internal/workspace/import.go). Export functions for creating workspace, moving repos, copying extra files. Enables reuse from TUI.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T10:10:07.614426486+01:00","updated_at":"2025-12-20T10:46:50.885336678+01:00","closed_at":"2025-12-20T10:46:50.885336678+01:00","close_reason":"Created internal/workspace/import.go with CreateWorkspace, AddToWorkspace, CopyExtraFiles and helper functions. Updated import command to use new package."}
{"id":"code-organization-9tx","title":"Create template loader (internal/template/loader.go)","description":"Implement ListTemplates(), LoadTemplate(), ValidateTemplate(), TemplateExists(), GetGlobalFilesPath(). Discovery from ~/Code/_system/templates/. Validate required fields, variable types, hook paths.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.183749+01:00","updated_at":"2025-12-14T12:20:08.646508+01:00","closed_at":"2025-12-14T12:20:08.646508+01:00","dependencies":[{"issue_id":"code-organization-9tx","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:26.02035+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-9tx","depends_on_id":"code-organization-yn2","type":"blocks","created_at":"2025-12-14T12:15:26.120165+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-9w5","title":"Implement hook script validation","description":"Create validateHookScript() to check script exists, is executable, has bash shebang. Auto-fix permissions if needed or error clearly.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.929051+01:00","updated_at":"2025-12-14T12:23:41.048373+01:00","closed_at":"2025-12-14T12:23:41.048373+01:00","dependencies":[{"issue_id":"code-organization-9w5","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:27.249222+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-9w5","depends_on_id":"code-organization-fqe","type":"blocks","created_at":"2025-12-14T12:15:27.45606+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-9xn","title":"Implement tree-sitter AST-aware code chunker","description":"Create internal/chunker/treesitter.go using go-tree-sitter bindings. Support Go, Python, JS/TS, Rust, Ruby, Java, C/C++, C#, Bash. Extract functions, classes, methods as semantic chunks. Include fallback line-based chunking.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T22:55:43.463914+01:00","updated_at":"2025-12-13T22:57:28.93564+01:00","closed_at":"2025-12-13T22:57:28.93564+01:00","dependencies":[{"issue_id":"code-organization-9xn","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:39.433331+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-9xn","depends_on_id":"code-organization-5dr","type":"blocks","created_at":"2025-12-13T22:56:59.866417+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-9y0","title":"Create internal/partial/conflicts.go - Conflict resolution strategies","description":"Implement conflict resolution strategies:\n\nFUNCTIONS:\n\nResolveConflict(info *FileInfo, strategy string) FileAction\n- Map strategy string to action for a conflicting file\n- prompt -\u003e ActionPrompt (handled by caller)\n- skip -\u003e ActionSkip\n- overwrite -\u003e ActionOverwrite\n- backup -\u003e ActionBackup\n- merge -\u003e ActionMerge (if supported format)\n\nExecuteBackup(destPath string) (string, error)\n- Create backup of existing file before overwrite\n- Naming: file.ext -\u003e file.ext.bak\n- If .bak exists: file.ext.bak.1, .bak.2, etc.\n- Return path to backup file\n- Preserve permissions on backup\n\nIsPreserved(relPath string, preservePatterns []string) bool\n- Check if a path matches any preserve pattern\n- Use glob matching (filepath.Match or template.MatchGlob)\n- Preserved files are NEVER overwritten, regardless of strategy\n\nGetDefaultExtensions() []string\n- Return default template extensions: [\".tmpl\"]\n\nFORMAT DETECTION (for merge strategy):\n- IsGitignoreFile(path string) bool: Check if .gitignore or similar\n- IsJSONFile(path string) bool: Check .json extension\n- IsYAMLFile(path string) bool: Check .yaml or .yml extension\n- CanMerge(path string) bool: Return true if format supports merging\n\nNote: Actual merge implementations go in merge.go (Phase 4)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:42:54.162429+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:21:52.018054+01:00","closed_at":"2025-12-31T15:21:52.018054+01:00","close_reason":"Completed: conflicts.go fully implemented with ResolveConflict, ExecuteBackup, IsPreserved, GetDefaultExtensions, and format detection functions. Fixed hooks.go to remove undefined HookSpec fields. All 48 partial tests pass.","dependencies":[{"issue_id":"code-organization-9y0","depends_on_id":"code-organization-t60","type":"blocks","created_at":"2025-12-31T14:43:48.992245+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-9y0","depends_on_id":"code-organization-pzq","type":"parent-child","created_at":"2025-12-31T14:43:49.114675+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-a6c","title":"Write tests for Phase 4 features (merge, template integration, prerequisites)","description":"Tests for Phase 4 functionality:\n\nTEST FILE: internal/partial/merge_test.go\n\nMergeGitignore:\n- Merges two gitignore files\n- Preserves existing lines\n- Adds new unique lines\n- Removes duplicates\n- Handles empty files\n- Handles comments correctly\n- Works with .dockerignore, .npmignore\n\nMergeJSON:\n- Deep merges objects\n- Partial values override existing\n- Preserves existing-only keys\n- Handles nested objects\n- Handles arrays (replace)\n- Returns error for invalid JSON\n- Preserves formatting (indentation)\n\nMergeYAML:\n- Same cases as JSON\n- Returns error for invalid YAML\n- Handles multi-document (uses first)\n\ndeepMerge:\n- Merges flat maps\n- Merges nested maps recursively\n- Overlay takes precedence\n- Handles nil values\n\nTEST FILE: internal/template/partials_test.go\n\nTemplate with partials:\n- Applies partials after repos\n- Resolves partial variables from template vars\n- Handles conditional partials (when field)\n- Skips partial when condition false\n- Fails on missing partial\n- Fails on partial apply error\n- Order of operations is correct\n\nTEST FILE: internal/partial/prerequisites_test.go\n\nCheckPrerequisites:\n- Returns satisfied when all present\n- Detects missing commands\n- Detects missing files\n- Supports file glob patterns\n- Empty requires always satisfied\n- Returns all missing items (not just first)\n\ncommandExists:\n- Returns true for existing command\n- Returns false for missing command\n\nfileExists:\n- Returns true for existing file\n- Returns false for missing file\n- Supports glob patterns","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T14:46:02.196721+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:38:10.82146+01:00","closed_at":"2025-12-31T15:38:10.82146+01:00","close_reason":"Phase 4 tests complete","dependencies":[{"issue_id":"code-organization-a6c","depends_on_id":"code-organization-3zo","type":"blocks","created_at":"2025-12-31T14:46:11.342195+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-a6c","depends_on_id":"code-organization-26y","type":"blocks","created_at":"2025-12-31T14:46:11.361972+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-a6c","depends_on_id":"code-organization-boj","type":"blocks","created_at":"2025-12-31T14:46:11.380313+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-a6c","depends_on_id":"code-organization-bqd","type":"parent-child","created_at":"2025-12-31T14:46:11.453787+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-aqu","title":"Create TUI for partial selection and application","description":"Bubble Tea TUI for interactive partial management:\n\nLOCATION: internal/tui/partial_explorer.go\n\nTABS (similar to Template Explorer):\n1. Browse - List partials with details pane\n2. Apply - Apply partial to directory with variable prompts\n3. Validate - Validate partial manifests\n\nBROWSE TAB:\n- Left pane: List of partials (name, description)\n- Right pane: Details of selected partial\n  - Name, Description, Version\n  - Variables (with types and defaults)\n  - Files preview\n  - Hooks defined\n  - Tags\n- Keybindings:\n  - j/k: Navigate list\n  - l/h: Switch panes\n  - /: Search partials\n  - o: Open partial directory\n  - Tab: Switch to Apply tab\n\nAPPLY TAB:\n- Target directory input (default: current directory)\n- Browse button to select directory\n- Variable prompts for selected partial\n- Conflict strategy dropdown\n- Dry-run checkbox\n- No-hooks checkbox\n- Apply button\n\nVARIABLE PROMPTING:\n- String: text input\n- Boolean: checkbox/toggle\n- Choice: dropdown/select list\n- Show description as help text\n- Show default value\n- Validate on blur\n\nAPPLY RESULT SCREEN:\n- Show files created/skipped/overwritten\n- Show hooks executed\n- Option to open target directory\n- Return to Browse\n\nVALIDATE TAB:\n- List partials with validation status\n- Show validation errors for each\n- Validate all button\n\nKEYBINDINGS (Global):\n- Tab/Shift+Tab: Navigate tabs\n- 1-3: Jump to tab\n- q/Ctrl+C: Quit\n\nINTEGRATION:\n- Add 'co partial' (no args) to launch TUI\n- Similar to 'co template' launching Template Explorer","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T14:46:27.992369+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:50:36.944066+01:00","closed_at":"2025-12-31T15:50:36.944066+01:00","close_reason":"Completed","dependencies":[{"issue_id":"code-organization-aqu","depends_on_id":"code-organization-bxs","type":"blocks","created_at":"2025-12-31T14:47:47.32063+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-aqu","depends_on_id":"code-organization-2j3","type":"parent-child","created_at":"2025-12-31T14:47:47.398392+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-atq","title":"Implement template files processing","description":"Create ProcessTemplateFiles() to copy template files/ to workspace. Handle repos/\u003cname\u003e/ subdirectories for repo-specific files. Template files override global files.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.793792+01:00","updated_at":"2025-12-14T12:22:14.091421+01:00","closed_at":"2025-12-14T12:22:14.091421+01:00","dependencies":[{"issue_id":"code-organization-atq","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:26.898276+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-atq","depends_on_id":"code-organization-4dl","type":"blocks","created_at":"2025-12-14T12:15:27.147868+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-ax2","title":"Handle terminal resize in import browser","description":"Handle tea.WindowSizeMsg to update width/height. Recalculate visible lines, pane widths, scroll positions. Ensure content remains visible after resize. Follow patterns from template_explorer.go.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:09:51.861919745+01:00","updated_at":"2025-12-20T10:19:22.009769255+01:00","closed_at":"2025-12-20T10:19:22.009769255+01:00","close_reason":"Terminal resize handling already implemented via tea.WindowSizeMsg in Update(), updates width/height and scroller visible height"}
{"id":"code-organization-b8j","title":"Create database schema and migrations","description":"Define schema in internal/vectordb/: indexed_files table, chunks table, chunk_vectors virtual table (sqlite-vec), index_jobs table. Include schema versioning and migration system.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T22:55:27.829973+01:00","updated_at":"2025-12-13T22:57:28.696133+01:00","closed_at":"2025-12-13T22:57:28.696133+01:00","dependencies":[{"issue_id":"code-organization-b8j","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:34.541259+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-b8j","depends_on_id":"code-organization-0wy","type":"blocks","created_at":"2025-12-13T22:56:59.742203+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-b9d","title":"Wire partial hooks into Apply","description":"Use RunPartialHook for pre_apply/post_apply; handle HookFailedError semantics and CO_* env wiring","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T16:17:22.161561+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T16:17:22.161561+01:00","dependencies":[{"issue_id":"code-organization-b9d","depends_on_id":"code-organization-2j3","type":"discovered-from","created_at":"2025-12-31T16:17:22.162296+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-bm2","title":"Implement batch import for selected folders","description":"Import multiple selected folders as separate workspaces. Show progress for each. Handle errors per-folder without stopping batch. Show summary at end with success/failure counts.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-20T10:09:18.214727568+01:00","updated_at":"2025-12-21T08:26:40.989999794+01:00","closed_at":"2025-12-21T08:26:40.989999794+01:00","close_reason":"Implemented batch import: added StateBatchImportConfirm/Execute/Summary states, BatchImportItemResult type, batch execution logic that imports each folder as separate workspace, confirmation view with owner input, progress view, and summary with success/failure counts","dependencies":[{"issue_id":"code-organization-bm2","depends_on_id":"code-organization-zr8","type":"blocks","created_at":"2025-12-20T10:11:48.192108398+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-boj","title":"Implement prerequisites checking (requires field)","description":"Add prerequisite validation before applying partials:\n\nREQUIRES FIELD IN partial.json:\n{\n  \"requires\": {\n    \"commands\": [\"git\", \"node\", \"npm\"],\n    \"files\": [\"package.json\", \"tsconfig.json\"]\n  }\n}\n\nIMPLEMENTATION:\n\nCheckPrerequisites(p *Partial, targetPath string) (*PrerequisiteResult, error)\n- Check all required commands exist in PATH\n- Check all required files exist in target directory\n\nPrerequisiteResult struct:\n- Satisfied: bool\n- MissingCommands: []string\n- MissingFiles: []string\n\ncommandExists(name string) bool\n- Use exec.LookPath to check if command is in PATH\n- Handle platform differences if needed\n\nfileExists(targetPath, relPath string) bool\n- Check if file exists relative to target\n- Support glob patterns (e.g., \"*.go\" means any .go file)\n\nINTEGRATION:\n\nIn Apply():\n1. After loading partial, before any other work\n2. Call CheckPrerequisites\n3. If not satisfied and --force not set:\n   - Return PrerequisiteFailedError with details\n4. If not satisfied and --force set:\n   - Log warning but continue\n5. If satisfied: continue normally\n\nCLI OUTPUT:\nWhen prerequisites fail:\n  Error: Prerequisites not met for partial 'python-tooling':\n    Missing commands: python3, pip\n    Missing files: setup.py\n  \n  Use --force to apply anyway.\n\nTESTING:\n- Test with missing commands (mock exec.LookPath)\n- Test with missing files\n- Test with all satisfied\n- Test --force bypasses check","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T14:45:49.221587+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:31:40.11794+01:00","closed_at":"2025-12-31T15:31:40.11794+01:00","close_reason":"Fully implemented: CheckPrerequisites validates commands via exec.LookPath and files with glob support. Integrated into Apply workflow.","dependencies":[{"issue_id":"code-organization-boj","depends_on_id":"code-organization-bqd","type":"parent-child","created_at":"2025-12-31T14:46:11.436011+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-bp8","title":"Create single-repo template","description":"Create single-repo/ template with template.json, files/README.md.tmpl, hooks/post-create.sh (init git, initial commit). Variables: project_name, description, author_name, license.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:22.089549+01:00","updated_at":"2025-12-14T12:49:13.886181+01:00","closed_at":"2025-12-14T12:49:13.886181+01:00","dependencies":[{"issue_id":"code-organization-bp8","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:17:12.019962+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-bp8","depends_on_id":"code-organization-g52","type":"blocks","created_at":"2025-12-14T12:17:12.229558+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-bqd","title":"EPIC: Advanced Features (Phase 4)","description":"Advanced conflict resolution with merge strategy for supported formats (JSON, YAML, .gitignore), template integration allowing templates to reference partials, conditional partial application with 'when' field, and prerequisites checking via 'requires' field.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-31T14:40:40.732144+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:37:18.97727+01:00","closed_at":"2025-12-31T15:37:18.97727+01:00","close_reason":"All Phase 4 features complete: merge.go (JSON/YAML/gitignore), prerequisites.go, template.json partials integration. All children closed, all tests passing.","dependencies":[{"issue_id":"code-organization-bqd","depends_on_id":"code-organization-i39","type":"blocks","created_at":"2025-12-31T14:46:11.30357+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-br0","title":"Add VectorsDBPath helper to config","description":"Add VectorsDBPath() method to Config struct returning filepath.Join(SystemDir(), 'vectors.db').","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-13T22:56:16.346094+01:00","updated_at":"2025-12-13T23:36:37.901969+01:00","closed_at":"2025-12-13T23:36:37.901969+01:00","dependencies":[{"issue_id":"code-organization-br0","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:49.421915+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-br0","depends_on_id":"code-organization-bsl","type":"blocks","created_at":"2025-12-13T22:57:08.89724+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-bsl","title":"Extend config.go with embedding settings","description":"Add EmbeddingsConfig struct to internal/config/config.go with Backend, OllamaURL, OllamaModel, OpenAIModel, OpenAIAPIKeyEnv fields. Add IndexingConfig with ChunkMaxLines, ExcludePatterns, IncludeLanguages.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T22:56:12.290307+01:00","updated_at":"2025-12-13T23:36:37.845853+01:00","closed_at":"2025-12-13T23:36:37.845853+01:00","dependencies":[{"issue_id":"code-organization-bsl","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:49.300095+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-bsl","depends_on_id":"code-organization-kxf","type":"blocks","created_at":"2025-12-13T22:57:08.837116+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-bxs","title":"Implement interactive conflict prompts","description":"Add interactive conflict resolution during apply:\n\nCONFLICT PROMPT UI:\nWhen strategy is 'prompt' and conflicts exist, prompt for each:\n\nConflicts:\n  ? .gitignore (exists)\n    [s]kip  [o]verwrite  [b]ackup  [d]iff  [a]ll-skip  [A]ll-overwrite: \n\nOPTIONS:\n- s: Skip this file (keep existing)\n- o: Overwrite this file\n- b: Backup and overwrite\n- d: Show diff between existing and new\n- m: Merge (if supported format, Phase 4)\n- a: Skip ALL remaining conflicts\n- A: Overwrite ALL remaining conflicts\n- B: Backup ALL remaining conflicts\n- q: Quit (abort apply)\n\nDIFF DISPLAY:\nWhen 'd' is pressed:\n  --- existing .gitignore\n  +++ partial .gitignore\n  @@ -1,3 +1,5 @@\n   node_modules/\n  +.beads/\n  +.co-*\n   .env\n\nAfter diff, re-prompt for action.\n\nIMPLEMENTATION:\n- Add to apply.go: promptForConflict(file FileInfo, vars map[string]string) (FileAction, bool, error)\n  - Returns: action, applyToAll, error\n  - applyToAll indicates 'a', 'A', or 'B' was selected\n- Use bufio.Reader for stdin or Bubble Tea simple prompt\n- Support --yes flag to skip prompts (use default strategy)\n\nDIFF GENERATION:\n- For text files: generate unified diff\n- Use go-diff library or simple line comparison\n- Truncate if diff is very long (\u003e50 lines)\n\nINTEGRATION:\n- In Apply(), when conflict strategy is 'prompt':\n  1. If --yes flag: use 'skip' as default action\n  2. Else: prompt for each conflict\n  3. Track 'applyToAll' state for remaining files\n- Update FilePlan based on user choices","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T14:44:40.249364+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:26:28.736365+01:00","closed_at":"2025-12-31T15:26:28.736365+01:00","close_reason":"Completed: Interactive conflict prompts fully implemented in apply.go. Includes promptForConflict(), showDiff(), formatDiff() with binary detection and truncation. Removed duplicate prompts.go. All tests pass.","dependencies":[{"issue_id":"code-organization-bxs","depends_on_id":"code-organization-6hy","type":"blocks","created_at":"2025-12-31T14:45:02.982022+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-bxs","depends_on_id":"code-organization-i39","type":"parent-child","created_at":"2025-12-31T14:45:03.097794+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-bxx","title":"Create sourceNode data structure for import browser tree","description":"Define sourceNode struct in internal/tui/import_browser.go with fields: Name, Path, RelPath, IsDir, IsExpanded, IsSelected, IsGitRepo, GitInfo (*git.RepoInfo), HasGitChild, Depth, Children. This is the core data structure for the import browser tree.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T10:08:12.464019969+01:00","updated_at":"2025-12-20T10:14:00.230675893+01:00","closed_at":"2025-12-20T10:14:00.230675893+01:00","close_reason":"Created sourceNode struct with all required fields (Name, Path, RelPath, IsDir, IsExpanded, IsSelected, IsGitRepo, GitInfo, HasGitChild, IsSymlink, Depth, Children) and ImportBrowserState enum with all states"}
{"id":"code-organization-c1t","title":"Update README.md with partials documentation","description":"Add comprehensive partials documentation to README.md:\n\nSECTIONS TO ADD:\n\n## Partials\n\nIntroduction paragraph explaining what partials are and how they differ from templates.\n\n### Partial Locations\n\n- Primary: ~/Code/_system/partials/\n- Fallback: ~/.config/co/partials/\n\n### Using Partials\n\n#### List available partials\nco partial list\nco partial list --tag agent\n\n#### Show partial details\nco partial show agent-setup\nco partial show agent-setup --files\n\n#### Apply a partial\nco partial apply agent-setup\nco partial apply agent-setup ./repos/backend\nco partial apply agent-setup -v primary_stack=go\nco partial apply agent-setup --dry-run\nco partial apply agent-setup --conflict skip -y\n\n### Conflict Resolution\n\nTable of strategies: prompt, skip, overwrite, backup, merge\nExplain preserve patterns\n\n### Creating Partials\n\n1. Directory structure\n2. partial.json manifest\n3. Variables\n4. Files and templates\n5. Hooks\n6. Tags\n\nExample partial.json with annotations\n\n### Built-in Variables\n\nTable of partial-specific variables:\n- DIRNAME, DIRPATH, PARENT_DIRNAME\n- IS_GIT_REPO, GIT_REMOTE_URL, GIT_BRANCH\n\n### Lifecycle Hooks\n\n- pre_apply: validation\n- post_apply: setup commands\n\nEnvironment variables available to hooks\n\n### Template Integration\n\nHow templates can reference partials\nThe 'partials' array in template.json\nApplication order","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T14:47:22.097636+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:37:07.355836+01:00","closed_at":"2025-12-31T15:37:07.355836+01:00","close_reason":"README already had partials docs; added CO_VERBOSE env var","dependencies":[{"issue_id":"code-organization-c1t","depends_on_id":"code-organization-aqu","type":"blocks","created_at":"2025-12-31T14:47:47.340305+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-c1t","depends_on_id":"code-organization-2j3","type":"parent-child","created_at":"2025-12-31T14:47:47.473781+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-c7o","title":"Add import-tui command to CLI","description":"Add new command 'co import-tui [path]' that launches the interactive import browser. Default path to current directory. Load config, call tui.RunImportBrowser(). Handle errors and display result.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T10:09:38.623063722+01:00","updated_at":"2025-12-20T10:20:18.620179992+01:00","closed_at":"2025-12-20T10:20:18.620179992+01:00","close_reason":"Created cmd/co/cmd/import_tui.go with 'co import-tui [path]' command that launches RunImportBrowser() and handles results","dependencies":[{"issue_id":"code-organization-c7o","depends_on_id":"code-organization-vc1","type":"blocks","created_at":"2025-12-20T10:11:43.391617929+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-c86","title":"Implement database query operations","description":"Add CRUD operations in internal/vectordb/queries.go: UpsertFile, GetFileByPath, DeleteFileChunks, InsertChunk, SearchSimilar, GetStats, DeleteCodebase, GetCodebases. Include embedding serialization helpers.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T22:55:28.853881+01:00","updated_at":"2025-12-13T22:57:28.755301+01:00","closed_at":"2025-12-13T22:57:28.755301+01:00","dependencies":[{"issue_id":"code-organization-c86","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:35.988363+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-c86","depends_on_id":"code-organization-b8j","type":"blocks","created_at":"2025-12-13T22:56:59.803556+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-cfv","title":"Implement file pattern matching","description":"Create pattern matching for include/exclude globs. Support ** for recursive, * for wildcard. Used to filter which template files to process.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.59226+01:00","updated_at":"2025-12-14T12:22:13.93018+01:00","closed_at":"2025-12-14T12:22:13.93018+01:00","dependencies":[{"issue_id":"code-organization-cfv","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:26.742287+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-cfv","depends_on_id":"code-organization-9tx","type":"blocks","created_at":"2025-12-14T12:15:26.950217+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-cxz","title":"Data models: project.json and index.jsonl schemas","description":"Implement internal/model with Go structs for ProjectJSON (schema v1) and IndexRecord. Include JSON marshaling/unmarshaling with proper tags.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-13T18:34:22.712245+01:00","updated_at":"2025-12-13T18:47:08.574639+01:00","closed_at":"2025-12-13T18:47:08.574639+01:00"}
{"id":"code-organization-d0j","title":"Implement vector search functionality","description":"Create internal/search/search.go with Searcher struct. Implement Search (query text), SearchByFile, SearchByCode, SearchSimilarTo methods. Return ranked SearchResult with scores, file paths, line numbers.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T22:55:45.278833+01:00","updated_at":"2025-12-13T22:57:36.700272+01:00","closed_at":"2025-12-13T22:57:36.700272+01:00","dependencies":[{"issue_id":"code-organization-d0j","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:48.937492+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-d0j","depends_on_id":"code-organization-c86","type":"blocks","created_at":"2025-12-13T22:57:00.109667+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-d0j","depends_on_id":"code-organization-zr3","type":"blocks","created_at":"2025-12-13T22:57:00.171491+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-dbu","title":"Add template selection to import flow","description":"After owner/project config, optionally show template selector. Reuse RunTemplateSelect() or embed template_select patterns. Store selected template name. Pass to preview and execution steps.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-20T10:09:25.967984019+01:00","updated_at":"2025-12-21T08:00:08.027579124+01:00","closed_at":"2025-12-21T08:00:08.027579124+01:00","close_reason":"Implemented template selection in import flow - added StateTemplateSelect state, template selection UI with navigation, and integrated into the import workflow between config and extra files steps","dependencies":[{"issue_id":"code-organization-dbu","depends_on_id":"code-organization-ues","type":"blocks","created_at":"2025-12-20T10:11:52.589469579+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-diw","title":"Add TemplatesDir() to config","description":"Extend internal/config/config.go with TemplatesDir() method returning filepath.Join(c.SystemDir(), 'templates').","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:21.135637+01:00","updated_at":"2025-12-14T12:24:17.451455+01:00","closed_at":"2025-12-14T12:24:17.451455+01:00","dependencies":[{"issue_id":"code-organization-diw","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:27.610981+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-diw","depends_on_id":"code-organization-9tx","type":"blocks","created_at":"2025-12-14T12:15:28.112084+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-do4","title":"co new command: workspace creation","description":"Implement 'co new \u003cowner\u003e \u003cproject\u003e [repo-url...]' - creates workspace dir, project.json, repos/ folder, optionally clones provided git repos.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T18:34:22.895115+01:00","updated_at":"2025-12-13T18:48:53.251334+01:00","closed_at":"2025-12-13T18:48:53.251334+01:00","dependencies":[{"issue_id":"code-organization-do4","depends_on_id":"code-organization-26h","type":"blocks","created_at":"2025-12-13T18:34:32.845921+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-do4","depends_on_id":"code-organization-cxz","type":"blocks","created_at":"2025-12-13T18:34:32.894846+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-drb","title":"Write unit tests for variable system","description":"Test cycle detection, variable substitution, conditional blocks, built-in variables, type validation. Use table-driven tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:22.301129+01:00","updated_at":"2025-12-14T12:58:38.584332+01:00","closed_at":"2025-12-14T12:58:38.584332+01:00","dependencies":[{"issue_id":"code-organization-drb","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:17:12.38041+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-drb","depends_on_id":"code-organization-rge","type":"blocks","created_at":"2025-12-14T12:17:12.521072+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-dzs","title":"Write tests for Phase 3 features (variables, hooks, prompts)","description":"Tests for Phase 3 functionality:\n\nTEST FILE: internal/partial/variables_test.go\n\nGetPartialBuiltins:\n- Returns DIRNAME correctly\n- Returns DIRPATH as absolute path\n- Returns PARENT_DIRNAME correctly\n- Returns IS_GIT_REPO='true' for git repos\n- Returns IS_GIT_REPO='false' for non-git dirs\n- Returns GIT_BRANCH for git repos\n- Returns GIT_REMOTE_URL for git repos\n- Handles missing git remote gracefully\n\nResolvePartialVariables:\n- Merges builtins with provided values\n- Applies defaults when not provided\n- Substitutes builtins in default values\n- Validates required variables present\n- Validates variable types and patterns\n- Returns error for missing required vars\n\nTEST FILE: internal/partial/hooks_test.go\n\nBuildPartialHookEnv:\n- Includes all standard env vars\n- Includes CO_VAR_ prefixed user vars\n- Includes file lists for post_apply\n- Correctly formats newline-separated lists\n\nRunPartialHook:\n- Executes script with correct env\n- Returns exit code and output\n- Handles timeout\n- Handles missing script\n- Supports string hook spec\n- Supports object hook spec with workdir\n\nTEST FILE: internal/partial/prompts_test.go (if separate)\n\npromptForConflict:\n- Returns correct action for each key\n- Handles applyToAll flags\n- Generates diff correctly\n- Handles non-text files (no diff available)\n\nUse mocking for stdin in interactive tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T14:44:53.374453+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:31:42.315611+01:00","closed_at":"2025-12-31T15:31:42.315611+01:00","close_reason":"Phase 3 tests complete: 30+ tests for variables, hooks, conflicts, and prompts. All pass. See variables_test.go, apply_test.go, loader_test.go, files_test.go.","dependencies":[{"issue_id":"code-organization-dzs","depends_on_id":"code-organization-8mo","type":"blocks","created_at":"2025-12-31T14:45:03.001171+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-dzs","depends_on_id":"code-organization-787","type":"blocks","created_at":"2025-12-31T14:45:03.020988+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-dzs","depends_on_id":"code-organization-bxs","type":"blocks","created_at":"2025-12-31T14:45:03.040139+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-dzs","depends_on_id":"code-organization-i39","type":"parent-child","created_at":"2025-12-31T14:45:03.116771+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-ect","title":"Write tests for internal/partial/loader.go","description":"Comprehensive tests for the partial loader:\n\nTEST FILE: internal/partial/loader_test.go\n\nTEST CASES FOR ListPartials:\n- Empty directory returns empty list\n- Single partial discovered correctly\n- Multiple partials discovered\n- Invalid partial.json skipped with warning\n- Hidden directories skipped\n- Nested directories not scanned (only top-level)\n- Multiple directories with priority (first wins)\n\nTEST CASES FOR FindPartial:\n- Finds partial in primary directory\n- Finds partial in fallback directory\n- Primary takes precedence over fallback (same name)\n- Returns error for non-existent partial\n- Name matching is exact (no fuzzy)\n\nTEST CASES FOR LoadPartial:\n- Loads valid partial.json\n- Returns InvalidManifestError for malformed JSON\n- Returns error for missing partial.json\n- Correctly parses all fields (variables, files, conflicts, hooks, tags, requires)\n- Handles optional fields with defaults\n\nTEST CASES FOR ValidatePartial:\n- Valid partial passes\n- Invalid schema version fails\n- Invalid name pattern fails (uppercase, starts with number, special chars)\n- Missing description fails\n- Invalid variable type fails\n- Choice type without choices fails\n- Required variable with default fails\n- Invalid conflict strategy fails\n- Non-existent hook path fails\n\nUse testify/assert for assertions. Create test fixtures as temp directories.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:42:06.961463+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T14:59:46.040691+01:00","closed_at":"2025-12-31T14:59:46.040691+01:00","close_reason":"loader_test.go fully implemented with comprehensive tests - all 35 tests pass","dependencies":[{"issue_id":"code-organization-ect","depends_on_id":"code-organization-5i9","type":"blocks","created_at":"2025-12-31T14:42:15.590087+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-ect","depends_on_id":"code-organization-g6j","type":"parent-child","created_at":"2025-12-31T14:42:23.068168+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-edf","title":"Add documentation for vector search feature","description":"Update README or add docs explaining: Ollama setup, co vector commands, configuration options, usage examples.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-13T22:56:25.071419+01:00","updated_at":"2025-12-14T12:21:11.059258+01:00","closed_at":"2025-12-14T09:40:00+01:00","dependencies":[{"issue_id":"code-organization-edf","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:49.542341+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-edf","depends_on_id":"code-organization-u2o","type":"blocks","created_at":"2025-12-13T22:57:09.07557+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-eoy","title":"Add --interactive flag to existing import command","description":"Add -i/--interactive flag to 'co import' command. When set, launch import browser TUI instead of current flow. If path provided, use as root. Otherwise use current directory.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:09:41.092034321+01:00","updated_at":"2025-12-20T10:49:03.504777033+01:00","closed_at":"2025-12-20T10:49:03.504777033+01:00","close_reason":"Added -i/--interactive flag to import command. When set, launches RunImportBrowser TUI. Works with or without path argument.","dependencies":[{"issue_id":"code-organization-eoy","depends_on_id":"code-organization-c7o","type":"blocks","created_at":"2025-12-20T10:11:43.447500984+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-f0k","title":"Integrate template selection into new workspace flow","description":"Modify internal/tui/new_prompt.go to add template selection as first step. Flow: select template → enter owner → enter project → enter variables → confirm.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:21.95393+01:00","updated_at":"2025-12-14T12:41:12.656092+01:00","closed_at":"2025-12-14T13:15:00+01:00","dependencies":[{"issue_id":"code-organization-f0k","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:17:11.719495+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-f0k","depends_on_id":"code-organization-48g","type":"blocks","created_at":"2025-12-14T12:17:11.862138+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-f0k","depends_on_id":"code-organization-n1v","type":"blocks","created_at":"2025-12-14T12:17:11.916508+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-fqe","title":"Implement hook environment builder","description":"Create buildHookEnv() returning env vars: CO_WORKSPACE_PATH, CO_WORKSPACE_SLUG, CO_OWNER, CO_PROJECT, CO_CODE_ROOT, CO_TEMPLATE_NAME, CO_TEMPLATE_PATH, CO_REPOS_PATH, CO_DRY_RUN, CO_VERBOSE, CO_HOOK_OUTPUT_FILE, CO_PREV_HOOK_OUTPUT, CO_VAR_*.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.863329+01:00","updated_at":"2025-12-14T12:23:40.998089+01:00","closed_at":"2025-12-14T12:23:40.998089+01:00","dependencies":[{"issue_id":"code-organization-fqe","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:27.19629+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-fqe","depends_on_id":"code-organization-yn2","type":"blocks","created_at":"2025-12-14T12:15:27.400094+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-g52","title":"Create _global template files","description":"Create ~/Code/_system/templates/_global/ with Agents.md.tmpl, claude.md.tmpl, .gitignore. Use built-in variables for project info.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:22.020442+01:00","updated_at":"2025-12-14T12:49:13.779066+01:00","closed_at":"2025-12-14T12:49:13.779066+01:00","dependencies":[{"issue_id":"code-organization-g52","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:17:11.965881+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-g52","depends_on_id":"code-organization-m7u","type":"blocks","created_at":"2025-12-14T12:17:12.179407+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-g6j","title":"EPIC: Core Partial Infrastructure (Phase 1)","description":"Foundation for the partials system: data model, loader, discovery, and basic CLI commands (list, show). This phase establishes the partial manifest schema, loading from filesystem, validation, and read-only CLI commands. Must be completed before any apply functionality can be implemented.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-31T14:40:15.453369+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:00:10.399799+01:00","closed_at":"2025-12-31T15:00:10.399799+01:00","close_reason":"All Phase 1 tasks completed: partial.go, errors.go, loader.go, config extension, CLI commands, and tests"}
{"id":"code-organization-gxb","title":"Implement workspace selector for add-to mode","description":"Create workspace selection list using bubbles/list. Show workspace slug, repo count, state. Support fuzzy filtering. Return selected workspace slug. Reuse patterns from template_select.go.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:09:09.861925186+01:00","updated_at":"2025-12-20T11:09:24.856476528+01:00","closed_at":"2025-12-20T11:09:24.856476528+01:00","close_reason":"Already implemented as part of code-organization-78l - workspace selection view with j/k navigation, enter to select, and integration with extra files/preview flow","dependencies":[{"issue_id":"code-organization-gxb","depends_on_id":"code-organization-78l","type":"blocks","created_at":"2025-12-20T10:11:43.289022142+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-i39","title":"EPIC: Interactive \u0026 Hooks (Phase 3)","description":"Interactive conflict resolution prompts, lifecycle hooks (pre_apply, post_apply), and partial-specific built-in variables (DIRNAME, IS_GIT_REPO, GIT_BRANCH, etc.). Makes the apply experience user-friendly with proper prompting and extensibility via hooks.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-31T14:40:32.239506+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:32:06.273455+01:00","closed_at":"2025-12-31T15:32:06.273455+01:00","close_reason":"All Phase 3 features complete: hooks.go (pre_apply/post_apply), variables.go (DIRNAME, IS_GIT_REPO, GIT_BRANCH, etc.), interactive conflict prompts in apply.go. All tests passing.","dependencies":[{"issue_id":"code-organization-i39","depends_on_id":"code-organization-pzq","type":"blocks","created_at":"2025-12-31T14:45:02.939287+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-iir","title":"Implement source tree node rendering with git status indicators","description":"Render tree nodes with: expand/collapse icons for dirs, git repo indicators (branch name, dirty status), depth-based indentation, selection highlighting. Use styles consistent with exclude_picker.go patterns.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:08:26.636311081+01:00","updated_at":"2025-12-20T10:19:10.510701054+01:00","closed_at":"2025-12-20T10:19:10.510701054+01:00","close_reason":"Node rendering already implemented in renderNode() with expand/collapse icons, git repo indicators (branch/dirty), symlink styling, depth indentation, and selection highlighting","dependencies":[{"issue_id":"code-organization-iir","depends_on_id":"code-organization-bxx","type":"blocks","created_at":"2025-12-20T10:11:28.409062755+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-imo","title":"Add 'co vector' command group","description":"Create cmd/co/cmd/vector.go with parent 'co vector' command. Set up command structure and shared flags (--json, --codebase, etc).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T22:55:56.407685+01:00","updated_at":"2025-12-13T22:57:36.758539+01:00","closed_at":"2025-12-13T22:57:36.758539+01:00","dependencies":[{"issue_id":"code-organization-imo","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:48.993803+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-imo","depends_on_id":"code-organization-k9n","type":"blocks","created_at":"2025-12-13T22:57:08.714917+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-imo","depends_on_id":"code-organization-d0j","type":"blocks","created_at":"2025-12-13T22:57:08.773571+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-k0l","title":"Epic: Semantic Code Search with Vector Embeddings","description":"Add semantic code search capability to co using AST-aware chunking (tree-sitter), local embeddings (Ollama), and vector similarity search (sqlite-vec). Enables finding similar code patterns across indexed codebases.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T22:55:14.452686+01:00","updated_at":"2025-12-14T10:50:16.285541+01:00","closed_at":"2025-12-14T09:27:56+01:00"}
{"id":"code-organization-k2c","title":"Extend co new with --var flag","description":"Add -v/--var flag accepting key=value pairs. Parse multiple -v flags. Pass to variable resolution.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:21.54239+01:00","updated_at":"2025-12-14T12:28:09.124213+01:00","closed_at":"2025-12-14T12:28:09.124213+01:00","dependencies":[{"issue_id":"code-organization-k2c","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:27.912152+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-k2c","depends_on_id":"code-organization-0jt","type":"blocks","created_at":"2025-12-14T12:15:28.622314+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-k9n","title":"Build indexing pipeline","description":"Create internal/search/indexer.go with Indexer struct that orchestrates: file scanning, parallel chunk extraction, batch embedding via Ollama, and database storage. Support incremental indexing via content hashes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T22:55:44.340875+01:00","updated_at":"2025-12-13T22:57:36.638781+01:00","closed_at":"2025-12-13T22:57:36.638781+01:00","dependencies":[{"issue_id":"code-organization-k9n","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:48.878722+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-k9n","depends_on_id":"code-organization-c86","type":"blocks","created_at":"2025-12-13T22:56:59.925212+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-k9n","depends_on_id":"code-organization-zr3","type":"blocks","created_at":"2025-12-13T22:56:59.985623+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-k9n","depends_on_id":"code-organization-9xn","type":"blocks","created_at":"2025-12-13T22:57:00.045831+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-kc8","title":"Implement stash confirmation sub-view","description":"When user presses 's' to stash, show confirmation dialog. Options: stash only (keep source), stash and delete. Show archive name preview. Use patterns from confirm.go. Allow custom archive name input.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:08:58.68084055+01:00","updated_at":"2025-12-20T10:27:41.372067013+01:00","closed_at":"2025-12-20T10:27:41.372067013+01:00","close_reason":"Implemented stash confirmation sub-view with custom name input, delete toggle, and archive preview","dependencies":[{"issue_id":"code-organization-kc8","depends_on_id":"code-organization-169","type":"blocks","created_at":"2025-12-20T10:11:38.433724901+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-kws","title":"Create internal/partial/errors.go - Error types","description":"Define error types for the partial package:\n\nERROR TYPES:\n- PartialNotFoundError: Name field, returns 'partial not found: \u003cname\u003e'\n- InvalidManifestError: Path, Err fields, implements Unwrap()\n- TargetNotFoundError: Path field for when target directory doesn't exist\n- PrerequisiteFailedError: Missing Commands[], Missing Files[], used when requirements aren't met\n- HookFailedError: HookType, Script, ExitCode, Output fields\n- ConflictAbortedError: When user cancels during conflict prompts\n- PathTraversalError: Path, TargetPath fields (security: files must stay in target)\n- MultiError: Errors []error with Add() and ErrorOrNil() methods\n\nIMPLEMENT:\n- Error() string method for all types\n- Unwrap() error method where applicable (InvalidManifestError, HookFailedError)\n\nFollow patterns from internal/template/errors.go exactly.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:41:16.230828+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T14:54:13.072002+01:00","closed_at":"2025-12-31T14:54:13.072002+01:00","close_reason":"Created internal/partial/errors.go with all error types","dependencies":[{"issue_id":"code-organization-kws","depends_on_id":"code-organization-605","type":"blocks","created_at":"2025-12-31T14:42:15.499049+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-kws","depends_on_id":"code-organization-g6j","type":"parent-child","created_at":"2025-12-31T14:42:22.994435+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-kxf","title":"Update go.mod with new dependencies","description":"Add required dependencies: github.com/asg017/sqlite-vec-go-bindings/cgo, github.com/mattn/go-sqlite3, github.com/smacker/go-tree-sitter and language grammars. Run go mod tidy.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T22:56:14.156418+01:00","updated_at":"2025-12-13T22:59:57.919805+01:00","closed_at":"2025-12-13T22:59:57.919805+01:00","dependencies":[{"issue_id":"code-organization-kxf","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:49.363736+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-l8p","title":"Enforce partial prerequisites in Apply","description":"Call CheckPrerequisites in partial.Apply, return PrerequisiteFailedError when missing unless --force is set; make --force meaningful","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T16:17:15.348881+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T16:17:15.348881+01:00","dependencies":[{"issue_id":"code-organization-l8p","depends_on_id":"code-organization-2j3","type":"discovered-from","created_at":"2025-12-31T16:17:15.349901+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-lcs","title":"Add keyboard navigation for import browser tree","description":"Implement vim-style navigation: j/k for up/down, h/l for collapse/expand dirs, g/G for top/bottom, space for toggle selection. Follow patterns from exclude_picker.go Update() method.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:08:31.618872906+01:00","updated_at":"2025-12-20T10:19:12.329133345+01:00","closed_at":"2025-12-20T10:19:12.329133345+01:00","close_reason":"Keyboard navigation already implemented: j/k up/down, h/l collapse/expand, g/G top/bottom, space toggle selection, tab switch pane, enter toggle expand","dependencies":[{"issue_id":"code-organization-lcs","depends_on_id":"code-organization-46w","type":"blocks","created_at":"2025-12-20T10:11:28.465794531+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-lm8","title":"Add 'co vector stats' subcommand","description":"Implement vectorStatsCmd: show index statistics, per-codebase breakdown, language distribution, file/chunk counts, index freshness.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T22:56:00.352518+01:00","updated_at":"2025-12-13T22:57:36.941126+01:00","closed_at":"2025-12-13T22:57:36.941126+01:00","dependencies":[{"issue_id":"code-organization-lm8","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:49.175911+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-lm8","depends_on_id":"code-organization-imo","type":"blocks","created_at":"2025-12-13T22:57:08.599052+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-lnl","title":"Apply template after import execution","description":"After repos are moved, call template.ApplyTemplateToExisting() if template was selected. Show template application progress. Handle template errors. Include in completion summary.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-20T10:09:30.290885606+01:00","updated_at":"2025-12-21T08:10:40.091024249+01:00","closed_at":"2025-12-21T08:10:40.091024249+01:00","close_reason":"Template application after import is complete: ApplyTemplateToExisting is called after repos moved, template results shown in post-import view with success/error states, TemplateError field added for tracking","dependencies":[{"issue_id":"code-organization-lnl","depends_on_id":"code-organization-6lj","type":"blocks","created_at":"2025-12-20T10:11:52.697027763+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-lqh","title":"Add 'co vector index' subcommand","description":"Implement vectorIndexCmd: index specific codebases, --all flag, --state filter, progress display, Ollama connection check with auto-pull.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T22:55:57.408582+01:00","updated_at":"2025-12-13T22:57:36.820192+01:00","closed_at":"2025-12-13T22:57:36.820192+01:00","dependencies":[{"issue_id":"code-organization-lqh","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:49.054146+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-lqh","depends_on_id":"code-organization-imo","type":"blocks","created_at":"2025-12-13T22:57:08.468601+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-m7u","title":"Implement template-based workspace creation","description":"Create orchestration function that: runs pre_create hook, creates workspace dir, processes global files, processes template files, runs post_create hook, clones/inits repos, runs post_clone hook, saves project.json, runs post_complete hook.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:21.675293+01:00","updated_at":"2025-12-14T12:25:08.139033+01:00","closed_at":"2025-12-14T12:25:08.139033+01:00","dependencies":[{"issue_id":"code-organization-m7u","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:28.014245+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-m7u","depends_on_id":"code-organization-atq","type":"blocks","created_at":"2025-12-14T12:15:28.368058+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-m7u","depends_on_id":"code-organization-ttk","type":"blocks","created_at":"2025-12-14T12:15:28.416784+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-m7u","depends_on_id":"code-organization-diw","type":"blocks","created_at":"2025-12-14T12:15:28.467882+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-m7u","depends_on_id":"code-organization-oyc","type":"blocks","created_at":"2025-12-14T12:15:28.517559+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-mf8","title":"Add help bar to import browser footer","description":"Show context-aware help at bottom of screen. In browse: j/k h/l g/G i a s q. In config: tab/enter esc. In preview: enter esc. Use helpStyle from existing TUIs. Update based on current state.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:09:46.642184548+01:00","updated_at":"2025-12-20T10:19:15.333441948+01:00","closed_at":"2025-12-20T10:19:15.333441948+01:00","close_reason":"Help bar already implemented in renderHelp() with context-aware help for browse state"}
{"id":"code-organization-n1v","title":"Create variable prompt TUI component","description":"Create internal/tui/variable_prompt.go to prompt for template variables. Handle string (text input), boolean (y/n), choice (select list), integer (number input). Validate inline.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:21.882793+01:00","updated_at":"2025-12-14T12:41:12.656453+01:00","closed_at":"2025-12-14T13:15:00+01:00","dependencies":[{"issue_id":"code-organization-n1v","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:17:11.671249+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-n1v","depends_on_id":"code-organization-rge","type":"blocks","created_at":"2025-12-14T12:17:11.816171+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-nv3","title":"Create cmd/co/cmd/partial.go - CLI commands (list, show)","description":"Implement the partial CLI subcommands:\n\nMAIN COMMAND:\nvar partialCmd = \u0026cobra.Command{\n  Use:     'partial',\n  Aliases: []string{'p'},\n  Short:   'Manage reusable file sets (partials)',\n  Long:    Description of partials concept\n}\n\nSUBCOMMAND: list\n- co partial list [--json] [--tag \u003ctag\u003e]\n- List all available partials from all directories\n- Output columns: NAME, DESCRIPTION, FILES, VARS\n- Use tabwriter for human output (like template list)\n- JSON output: array of PartialInfo structs\n- Filter by tag if --tag provided\n\nSUBCOMMAND: show\n- co partial show \u003cname\u003e [--json] [--files]\n- Display detailed partial information:\n  - Name, Description, Version\n  - Variables with types, defaults, descriptions\n  - Files that would be created (when --files)\n  - Hooks defined\n  - Tags\n  - Requirements\n- Error if partial not found (suggest listing)\n\nSUBCOMMAND: validate (optional for Phase 1)\n- co partial validate [name]\n- Validate one or all partial manifests\n- Return validation errors in human-readable format\n\nREGISTRATION:\nfunc init() {\n  rootCmd.AddCommand(partialCmd)\n  partialCmd.AddCommand(partialListCmd)\n  partialCmd.AddCommand(partialShowCmd)\n}\n\nFollow patterns from cmd/co/cmd/template.go exactly for consistency.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:41:54.333404+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T14:59:19.99648+01:00","closed_at":"2025-12-31T14:59:19.99648+01:00","close_reason":"partial.go CLI already fully implemented with list, show, and validate commands","dependencies":[{"issue_id":"code-organization-nv3","depends_on_id":"code-organization-5i9","type":"blocks","created_at":"2025-12-31T14:42:15.553887+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-nv3","depends_on_id":"code-organization-80n","type":"blocks","created_at":"2025-12-31T14:42:15.572082+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-nv3","depends_on_id":"code-organization-g6j","type":"parent-child","created_at":"2025-12-31T14:42:23.04924+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-nzi","title":"Implement built-in variables","description":"Create GetBuiltinVariables() returning OWNER, PROJECT, SLUG, CREATED_DATE, CREATED_DATETIME, YEAR, GIT_USER_NAME, GIT_USER_EMAIL, HOME, CODE_ROOT, WORKSPACE_PATH. Read git config for user info.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.255092+01:00","updated_at":"2025-12-14T12:21:16.835031+01:00","closed_at":"2025-12-14T12:21:16.835031+01:00","dependencies":[{"issue_id":"code-organization-nzi","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:26.172088+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-nzi","depends_on_id":"code-organization-yn2","type":"blocks","created_at":"2025-12-14T12:15:26.425052+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-o27","title":"Write integration tests for import browser TUI","description":"Test full TUI flow with tea.Test or similar. Simulate key presses. Verify state changes. Test import and stash execution. Verify filesystem changes. Clean up test directories.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-20T10:10:32.244674809+01:00","updated_at":"2025-12-21T12:08:07.98847464+01:00","closed_at":"2025-12-21T12:08:07.98847464+01:00","close_reason":"Completed: Added 10 integration tests for import browser TUI covering navigation, state transitions, multi-select, template selection, and key handling","dependencies":[{"issue_id":"code-organization-o27","depends_on_id":"code-organization-c7o","type":"blocks","created_at":"2025-12-20T10:11:57.271930903+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-or5","title":"Create co template validate command","description":"Implement 'co template validate [name]' to validate one or all templates. Report errors clearly. Exit non-zero on validation failure.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:21.408143+01:00","updated_at":"2025-12-14T12:25:52.119231+01:00","closed_at":"2025-12-14T12:25:52.119231+01:00","dependencies":[{"issue_id":"code-organization-or5","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:27.810239+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-or5","depends_on_id":"code-organization-9tx","type":"blocks","created_at":"2025-12-14T12:15:28.318164+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-oyc","title":"Add Template fields to Project model","description":"Extend internal/model/project.go with Template string and TemplateVars map[string]string fields. Update JSON serialization.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:21.206483+01:00","updated_at":"2025-12-14T12:24:17.506072+01:00","closed_at":"2025-12-14T12:24:17.506072+01:00","dependencies":[{"issue_id":"code-organization-oyc","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:27.657391+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-oyc","depends_on_id":"code-organization-yn2","type":"blocks","created_at":"2025-12-14T12:15:28.16881+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-pci","title":"Create monorepo template","description":"Create monorepo/ template with frontend/backend structure. Variables: project_name, description, frontend_framework, backend_language. Hook to init multiple repos.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:22.161134+01:00","updated_at":"2025-12-14T12:49:13.999362+01:00","closed_at":"2025-12-14T12:49:13.999362+01:00","dependencies":[{"issue_id":"code-organization-pci","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:17:12.074932+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-pci","depends_on_id":"code-organization-bp8","type":"blocks","created_at":"2025-12-14T12:17:12.280077+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-pfg","title":"Extend co new with --no-hooks and --dry-run","description":"Add --no-hooks to skip lifecycle hooks. Add --dry-run to preview creation without making changes. Log what would happen.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:21.612491+01:00","updated_at":"2025-12-14T12:28:09.231022+01:00","closed_at":"2025-12-14T12:28:09.231022+01:00","dependencies":[{"issue_id":"code-organization-pfg","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:27.963968+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-pfg","depends_on_id":"code-organization-0jt","type":"blocks","created_at":"2025-12-14T12:15:28.676379+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-pgc","title":"Implement source tree building with git repo detection","description":"Implement buildSourceTree() that walks directory, creates sourceNode hierarchy. Call git.FindGitRoots() to detect repos. Mark IsGitRepo=true for detected roots. Set GitInfo by calling git.GetInfo(). Set HasGitChild for parent directories.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T10:08:14.058060863+01:00","updated_at":"2025-12-20T10:15:09.502442377+01:00","closed_at":"2025-12-20T10:15:09.502442377+01:00","close_reason":"Implemented buildSourceTree(), loadSourceChildren(), hasGitDescendant(), expandNode(), collapseNode(), toggleExpand() with git repo detection using git.FindGitRoots() and git.GetInfo()","dependencies":[{"issue_id":"code-organization-pgc","depends_on_id":"code-organization-bxx","type":"blocks","created_at":"2025-12-20T10:11:19.752000546+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-pn1","title":"Implement single file processing","description":"Create processFile() that copies file or expands template. Detect .tmpl extension for template files. Remove .tmpl from output filename. Preserve directory structure and permissions.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.662256+01:00","updated_at":"2025-12-14T12:22:13.986732+01:00","closed_at":"2025-12-14T12:22:13.986732+01:00","dependencies":[{"issue_id":"code-organization-pn1","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:26.794012+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-pn1","depends_on_id":"code-organization-rge","type":"blocks","created_at":"2025-12-14T12:15:26.999174+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-pn1","depends_on_id":"code-organization-cfv","type":"blocks","created_at":"2025-12-14T12:15:27.051082+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-py5","title":"Implement tree flattening and scroll management for source browser","description":"Flatten the hierarchical sourceNode tree into a display list. Handle scroll offset management with ensureVisible() pattern from exclude_picker.go. Support viewport calculations based on terminal height.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:08:21.146305505+01:00","updated_at":"2025-12-20T10:16:13.174881148+01:00","closed_at":"2025-12-20T10:16:13.174881148+01:00","close_reason":"Implemented flattenSourceTree(), flattenSourceNode(), and sourceTreeScroller with moveUp/Down/ToTop/ToBottom, ensureVisible(), visibleRange(), selectedNode() methods","dependencies":[{"issue_id":"code-organization-py5","depends_on_id":"code-organization-bxx","type":"blocks","created_at":"2025-12-20T10:11:22.1134114+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-pzq","title":"EPIC: Apply Logic (Phase 2)","description":"Core apply functionality: file copying with variable substitution, conflict detection, simple conflict strategies (skip, overwrite, backup), non-interactive apply command, and dry-run mode. Builds on Phase 1 infrastructure to enable actually applying partials to directories.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-31T14:40:23.642976+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:13:32.273383+01:00","closed_at":"2025-12-31T15:13:32.273383+01:00","close_reason":"Phase 2 complete. Implemented: apply.go (Apply function with variable resolution, conflict detection, all strategies), files.go (file scanning, conflict detection, processing), partial apply CLI command with all flags. 120 tests passing.","dependencies":[{"issue_id":"code-organization-pzq","depends_on_id":"code-organization-g6j","type":"blocks","created_at":"2025-12-31T14:43:48.9741+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-qyo","title":"co archive command: bundle-based archiving","description":"Implement 'co archive \u003cslug\u003e [--delete] [--reason]'. Create git bundles per repo, package with project.json and meta, store in _system/archive/YYYY/.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T18:34:23.458786+01:00","updated_at":"2025-12-13T18:52:25.551948+01:00","closed_at":"2025-12-13T18:52:25.551948+01:00","dependencies":[{"issue_id":"code-organization-qyo","depends_on_id":"code-organization-2bw","type":"blocks","created_at":"2025-12-13T18:34:33.396624+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-qyo","depends_on_id":"code-organization-cxz","type":"blocks","created_at":"2025-12-13T18:34:33.445113+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-qzs","title":"Implement conditional blocks","description":"Create ProcessConditionals() to handle {{#if VAR}}...{{/if}}, {{#if VAR == \"value\"}}...{{/if}}, {{#if VAR != \"value\"}}...{{/if}} blocks. Support truthy checks for booleans.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.458809+01:00","updated_at":"2025-12-14T12:21:16.992396+01:00","closed_at":"2025-12-14T12:21:16.992396+01:00","dependencies":[{"issue_id":"code-organization-qzs","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:26.322822+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-qzs","depends_on_id":"code-organization-u6o","type":"blocks","created_at":"2025-12-14T12:15:26.589404+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-r9d","title":"Epic: Project Templating and Scripting System","description":"Implement a templating and scripting system for the co CLI that enables reproducible workspace creation with templates, global files, variable substitution, and lifecycle hooks. See docs/specs/templating-spec.md for full specification.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-14T11:39:54.286775+01:00","updated_at":"2025-12-14T13:17:44.12468+01:00","closed_at":"2025-12-14T15:21:00+01:00"}
{"id":"code-organization-rge","title":"Implement variable resolution","description":"Create ResolveVariables() that merges provided vars, defaults (with interpolation), and built-ins. Validate against regex patterns. Handle all variable types (string, boolean, choice, integer).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.527496+01:00","updated_at":"2025-12-14T12:21:17.040791+01:00","closed_at":"2025-12-14T12:21:17.040791+01:00","dependencies":[{"issue_id":"code-organization-rge","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:26.37617+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-rge","depends_on_id":"code-organization-nzi","type":"blocks","created_at":"2025-12-14T12:15:26.638753+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-rge","depends_on_id":"code-organization-qzs","type":"blocks","created_at":"2025-12-14T12:15:26.689504+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-ryu","title":"Config system: config.json discovery and parsing","description":"Implement internal/config with config discovery order (--config flag, XDG_CONFIG_HOME, ~/Code/_system/config.json). Parse server definitions for sync.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T18:34:22.804331+01:00","updated_at":"2025-12-13T18:47:34.326888+01:00","closed_at":"2025-12-13T18:47:34.326888+01:00","dependencies":[{"issue_id":"code-organization-ryu","depends_on_id":"code-organization-cxz","type":"blocks","created_at":"2025-12-13T18:34:32.795196+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-svm","title":"Epic: Template Explorer TUI enhancements","description":"Follow-up enhancements for the Template Explorer TUI once the MVP is working.\n\nThese items improve inspection/debuggability of templates (rendered previews, output mapping, diagnostics) but are not required for the initial shipping version.","acceptance_criteria":"- Enhancements are optional and can be implemented independently of the MVP epic\n- Each enhancement has clear UX + acceptance criteria","status":"closed","priority":3,"issue_type":"epic","created_at":"2025-12-14T16:21:22.413801+01:00","updated_at":"2025-12-14T21:22:39.790764+01:00","closed_at":"2025-12-14T21:22:39.790764+01:00","dependencies":[{"issue_id":"code-organization-svm","depends_on_id":"code-organization-407","type":"related","created_at":"2025-12-14T16:21:39.297688+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-svm.1","title":"Rendered preview for template files","description":"In the Files tab, add a toggle to view templated files as:\n- Raw source\n- Rendered output (ProcessConditionals + SubstituteVariables)\n\nRendered mode should use a controllable variable context (builtins + user overrides) and clearly indicate which context is active.","design":"Prefer reusing internal/template.ProcessTemplateContent.\n\nVariable context sources:\n- Builtins derived from current Create tab owner/project (if present)\n- Optional ad-hoc overrides UI (simple key/value input) for preview-only\n\nDo not write files; this is preview-only.","acceptance_criteria":"- User can toggle raw/rendered for .tmpl (and configured template extension) files\n- Rendered output matches internal/template.ProcessTemplateContent behavior\n- Viewer indicates when unresolved vars remain (e.g., leaves {{VAR}} visible)\n- Changing variable context updates rendered preview","status":"closed","priority":3,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-14T16:22:05.464417+01:00","updated_at":"2025-12-14T19:30:42.367823+01:00","closed_at":"2025-12-14T19:30:42.367823+01:00","dependencies":[{"issue_id":"code-organization-svm.1","depends_on_id":"code-organization-svm","type":"parent-child","created_at":"2025-12-14T16:22:05.476905+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-svm.1","depends_on_id":"code-organization-407.8","type":"blocks","created_at":"2025-12-14T16:27:59.308749+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-svm.2","title":"Output mapping view (global + template overrides)","description":"Add an Output view that shows the merged set of files that would land in the workspace:\n- Combine _global files and template files into a single output file list\n- Indicate origin (global dir X / template) and whether the template overrides a global file\n- For templated files, show output path after stripping template extension\n\nThis is a pure inspection tool (no writes).","design":"Implement a reusable mapping helper in internal/template that returns: outputPath -\u003e {sourcePath, originType, originDir, isOverride}.\n\nReuse the same precedence rules as ProcessGlobalFilesMulti/ProcessAllFilesMulti.","acceptance_criteria":"- Output view lists effective workspace-relative paths deterministically\n- Each output entry shows origin + override status\n- Selecting an output file can jump to the corresponding source file(s)","status":"closed","priority":3,"issue_type":"task","estimated_minutes":240,"created_at":"2025-12-14T16:23:02.035802+01:00","updated_at":"2025-12-14T20:28:39.744446+01:00","closed_at":"2025-12-14T20:28:39.744446+01:00","dependencies":[{"issue_id":"code-organization-svm.2","depends_on_id":"code-organization-svm","type":"parent-child","created_at":"2025-12-14T16:23:02.036366+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-svm.2","depends_on_id":"code-organization-407.4","type":"blocks","created_at":"2025-12-14T16:28:13.995118+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-svm.3","title":"Diagnostics: include/exclude debugger + placeholder scan","description":"Add diagnostics tooling in the UI:\n- For a given file, show whether it is included/excluded and why (which pattern matched)\n- Scan selected template for unresolved placeholders (e.g., {{VAR}} that is not provided by builtins/defaults/user overrides)\n\nGoal: make template debugging faster.","design":"Pattern debugger likely needs a small extension to PatternMatcher to return match details (not just bool).\n\nPlaceholder scan can reuse variableRefPattern in internal/template/variables.go.","acceptance_criteria":"- User can see why a file is included or excluded (pattern + rule)\n- Placeholder scan reports file + line (where possible) for unresolved vars\n- Diagnostics are computed without writing to disk","status":"closed","priority":3,"issue_type":"task","estimated_minutes":240,"created_at":"2025-12-14T16:23:20.516979+01:00","updated_at":"2025-12-14T20:50:33.615416+01:00","closed_at":"2025-12-14T20:50:33.615416+01:00","dependencies":[{"issue_id":"code-organization-svm.3","depends_on_id":"code-organization-svm","type":"parent-child","created_at":"2025-12-14T16:23:20.517592+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-svm.3","depends_on_id":"code-organization-407.4","type":"blocks","created_at":"2025-12-14T16:28:29.315486+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-svm.3","depends_on_id":"code-organization-407.7","type":"blocks","created_at":"2025-12-14T16:28:43.584262+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-svm.4","title":"Compare two templates (manifest + file list)","description":"Add a compare mode:\n- Pick two templates\n- Show diff for manifest summary (vars/repos/hooks) and file list differences\n- Highlight overrides (same output path, different sources)\n\nThis is inspection-only and does not modify templates.","design":"Start with a simple compare: set diffs for variable names, repo names, hook scripts, and effective output paths.\n\nA full textual diff is optional; initial implementation can focus on structured diffs.","acceptance_criteria":"- User can select two templates to compare\n- Compare view summarizes differences clearly (added/removed/changed)\n- Navigation allows jumping into file viewer for relevant files","status":"closed","priority":3,"issue_type":"task","estimated_minutes":240,"created_at":"2025-12-14T16:23:37.089384+01:00","updated_at":"2025-12-14T21:21:55.139545+01:00","closed_at":"2025-12-14T21:21:55.139545+01:00","dependencies":[{"issue_id":"code-organization-svm.4","depends_on_id":"code-organization-svm","type":"parent-child","created_at":"2025-12-14T16:23:37.089957+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-svm.4","depends_on_id":"code-organization-407.4","type":"blocks","created_at":"2025-12-14T16:29:01.671531+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-svm.4","depends_on_id":"code-organization-407.6","type":"blocks","created_at":"2025-12-14T16:29:15.700029+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-t4d","title":"Create built-in partials: eslint and github-actions","description":"Create additional built-in partials:\n\nESLINT PARTIAL:\nLocation: ~/Code/_system/partials/eslint/\n\npartial.json:\n- name: eslint\n- description: ESLint configuration for JavaScript/TypeScript\n- variables: typescript (boolean), prettier (boolean)\n- requires: commands: [node, npm]\n- tags: [javascript, typescript, linting]\n\nFiles:\n- files/.eslintrc.json.tmpl (config with TS support if typescript=true)\n- files/.eslintignore (node_modules, dist, etc.)\n\nGITHUB-ACTIONS PARTIAL:\nLocation: ~/Code/_system/partials/github-actions/\n\npartial.json:\n- name: github-actions\n- description: GitHub Actions CI/CD workflows\n- variables:\n  - language (choice: node, python, go, rust)\n  - run_tests (boolean, default: true)\n  - build_artifact (boolean, default: false)\n- tags: [ci, github, automation]\n\nFiles:\n- files/.github/workflows/ci.yml.tmpl\n  - Runs tests based on language\n  - Conditional steps based on variables\n- files/.github/workflows/release.yml.tmpl\n  - Release automation\n  - Only if build_artifact=true\n\nThese partials demonstrate different use cases:\n- eslint: Language-specific tooling\n- github-actions: CI/CD automation with conditionals","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T14:47:08.128571+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:58:22.577781+01:00","closed_at":"2025-12-31T15:58:22.577781+01:00","close_reason":"Completed","dependencies":[{"issue_id":"code-organization-t4d","depends_on_id":"code-organization-2j3","type":"parent-child","created_at":"2025-12-31T14:47:47.455182+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-t4p","title":"Move templates folder to _system directory","description":"Change default template location from ~/.config/co/templates/ to ~/Code/_system/templates/. This keeps all co-related data under the Code root, making it easier to sync or backup. Support fallback to XDG config location for backwards compatibility.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T16:30:00+01:00","updated_at":"2025-12-14T15:13:00.956877+01:00","closed_at":"2025-12-14T15:13:00.956877+01:00"}
{"id":"code-organization-t4q","title":"Update TemplatesDir() to use _system/templates","description":"Modify internal/config/config.go TemplatesDir() method to return filepath.Join(c.SystemDir(), 'templates') instead of XDG config path. This is the primary change.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:30:00+01:00","updated_at":"2025-12-14T15:13:00.956877+01:00","closed_at":"2025-12-14T15:13:00.956877+01:00","dependencies":[{"issue_id":"code-organization-t4q","depends_on_id":"code-organization-t4p","type":"parent-child","created_at":"2025-12-14T16:30:00+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-t4r","title":"Add fallback template discovery from XDG config","description":"Support fallback template discovery: check _system/templates first, then ~/.config/co/templates/. This provides backwards compatibility for users with existing templates in the old location.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:30:00+01:00","updated_at":"2025-12-14T15:13:00.956877+01:00","closed_at":"2025-12-14T15:13:00.956877+01:00","dependencies":[{"issue_id":"code-organization-t4r","depends_on_id":"code-organization-t4p","type":"parent-child","created_at":"2025-12-14T16:30:00+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-t4r","depends_on_id":"code-organization-t4q","type":"blocks","created_at":"2025-12-14T16:30:00+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-t4s","title":"Update README template documentation for new location","description":"Update README.md Templates section to reflect new default location ~/Code/_system/templates/ and mention fallback to XDG config location.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:30:00+01:00","updated_at":"2025-12-14T15:13:00.956877+01:00","closed_at":"2025-12-14T15:13:00.956877+01:00","dependencies":[{"issue_id":"code-organization-t4s","depends_on_id":"code-organization-t4p","type":"parent-child","created_at":"2025-12-14T16:30:00+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-t4s","depends_on_id":"code-organization-t4q","type":"blocks","created_at":"2025-12-14T16:30:00+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-t4t","title":"Update template package tests for new location","description":"Update internal/template tests to use _system/templates path. Ensure tests still pass with the new default location.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:30:00+01:00","updated_at":"2025-12-14T15:13:00.956877+01:00","closed_at":"2025-12-14T15:13:00.956877+01:00","dependencies":[{"issue_id":"code-organization-t4t","depends_on_id":"code-organization-t4p","type":"parent-child","created_at":"2025-12-14T16:30:00+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-t4t","depends_on_id":"code-organization-t4q","type":"blocks","created_at":"2025-12-14T16:30:00+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-t60","title":"Create internal/partial/files.go - File processing and conflict detection","description":"File operations for partial application:\n\nTYPES:\n- FileAction enum: ActionCreate, ActionSkip, ActionOverwrite, ActionBackup, ActionMerge\n- FileInfo struct: RelPath, AbsSourcePath, AbsDestPath, ExistsInTarget, TargetModTime, Action\n- FilePlan struct: Files []FileInfo, Creates/Skips/Overwrites/Backups/Merges counts\n\nFUNCTIONS:\n\nScanPartialFiles(partialPath string, filesConfig PartialFiles) ([]string, error)\n- Walk the files/ subdirectory of the partial\n- Apply include/exclude patterns using template.NewPatternMatcher\n- Return list of relative paths (from files/ dir)\n- Detect .tmpl files for later processing\n\nDetectConflicts(files []string, partialPath, targetPath string, conflicts ConflictConfig) (*FilePlan, error)\n- For each file, check if it exists in target\n- Check against preserve patterns (never overwrite)\n- Assign initial action based on conflict strategy\n- Return complete plan of what will happen\n\nCopyFile(src, dest string, mode os.FileMode) error\n- Simple file copy (no templating)\n- Create parent directories as needed\n- Preserve permissions\n\nProcessFile(srcPath, destPath string, isTemplate bool, vars map[string]string, extensions []string) error\n- If isTemplate: read, substitute variables via template.ProcessTemplateContent, write\n- Else: simple copy\n- Strip .tmpl extension from dest if applicable\n- Create parent directories\n\nSECURITY:\n- Validate all dest paths are within target directory (no ../ escape)\n- Return PathTraversalError if violated\n\nReuse from template package:\n- template.NewPatternMatcher for include/exclude\n- template.IsTemplateFile for .tmpl detection\n- template.StripTemplateExtension for removing .tmpl\n- template.ProcessTemplateContent for variable substitution","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:42:40.259404+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:14:22.033108+01:00","closed_at":"2025-12-31T15:14:22.033108+01:00","close_reason":"Completed","dependencies":[{"issue_id":"code-organization-t60","depends_on_id":"code-organization-pzq","type":"parent-child","created_at":"2025-12-31T14:43:49.097209+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-tji","title":"Add 'co vector clear' subcommand","description":"Implement vectorClearCmd: clear index for specific codebase or --all to delete entire vectors.db file.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T22:56:11.346281+01:00","updated_at":"2025-12-13T22:57:37.001455+01:00","closed_at":"2025-12-13T22:57:37.001455+01:00","dependencies":[{"issue_id":"code-organization-tji","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:49.238378+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-tji","depends_on_id":"code-organization-imo","type":"blocks","created_at":"2025-12-13T22:57:08.654814+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-ttk","title":"Implement hook output sharing","description":"Create temp file for CO_HOOK_OUTPUT_FILE. Read previous hook output for CO_PREV_HOOK_OUTPUT. Chain outputs through pre_create → post_create → post_clone → post_complete.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:21.067008+01:00","updated_at":"2025-12-14T12:23:41.146387+01:00","closed_at":"2025-12-14T12:23:41.146387+01:00","dependencies":[{"issue_id":"code-organization-ttk","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:27.350034+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-ttk","depends_on_id":"code-organization-2yl","type":"blocks","created_at":"2025-12-14T12:15:27.557766+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-u2o","title":"Write integration tests for vector search","description":"Create tests for full indexing and search workflow: index a test codebase, search for known patterns, verify results.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-13T22:56:23.550268+01:00","updated_at":"2025-12-14T10:50:16.28612+01:00","closed_at":"2025-12-14T09:27:56+01:00","dependencies":[{"issue_id":"code-organization-u2o","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:49.484633+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-u2o","depends_on_id":"code-organization-lqh","type":"blocks","created_at":"2025-12-13T22:57:08.955979+01:00","created_by":"tormodhaugland","metadata":"{}"},{"issue_id":"code-organization-u2o","depends_on_id":"code-organization-6cy","type":"blocks","created_at":"2025-12-13T22:57:09.016423+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-u6o","title":"Implement variable substitution","description":"Create SubstituteVariables() to replace {{VAR}} placeholders in content. Handle missing variables gracefully. Support nested substitution after cycle-safe ordering.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.39383+01:00","updated_at":"2025-12-14T12:21:16.937858+01:00","closed_at":"2025-12-14T12:21:16.937858+01:00","dependencies":[{"issue_id":"code-organization-u6o","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:26.277327+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-u6o","depends_on_id":"code-organization-6r6","type":"blocks","created_at":"2025-12-14T12:15:26.534916+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-u6w","title":"Create import preview sub-view","description":"Show preview of import operation: target workspace path, list of repos to move, list of extra files to copy, template to apply (if any). Show summary stats. Require enter to confirm or esc to go back.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:08:48.757882868+01:00","updated_at":"2025-12-20T10:58:07.718952632+01:00","closed_at":"2025-12-20T10:58:07.718952632+01:00","close_reason":"Import preview already implemented: shows workspace slug/path, source path, repo list with count, extra files with destination. Enter confirms, esc goes back to extra files or config.","dependencies":[{"issue_id":"code-organization-u6w","depends_on_id":"code-organization-43w","type":"blocks","created_at":"2025-12-20T10:11:33.71334941+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-ues","title":"Implement import config sub-view for owner/project input","description":"When user presses 'i' to import, show inline owner/project input (reuse patterns from prompt.go). Pre-populate project name from folder name. Validate slug parts. Allow esc to cancel back to browse state.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:08:43.611931903+01:00","updated_at":"2025-12-20T10:22:54.120817313+01:00","closed_at":"2025-12-20T10:22:54.120817313+01:00","close_reason":"Implemented import config sub-view with owner/project text inputs, validation, pre-populated project name from folder, state transitions, and preview navigation","dependencies":[{"issue_id":"code-organization-ues","depends_on_id":"code-organization-169","type":"blocks","created_at":"2025-12-20T10:11:33.612966719+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-vc1","title":"Create RunImportBrowser() entry point function","description":"Create public RunImportBrowser(rootPath string, cfg *config.Config) error function. Initialize model, run tea.Program with alt screen, return error if any. This is the main entry point for the TUI.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T10:09:36.350119863+01:00","updated_at":"2025-12-20T10:19:08.557171759+01:00","closed_at":"2025-12-20T10:19:08.557171759+01:00","close_reason":"RunImportBrowser() entry point already created - creates model, runs tea.Program with alt screen, returns ImportBrowserResult","dependencies":[{"issue_id":"code-organization-vc1","depends_on_id":"code-organization-46w","type":"blocks","created_at":"2025-12-20T10:11:43.343844918+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-wax","title":"Create co template show command","description":"Implement 'co template show \u003cname\u003e' displaying full template details: description, variables (with types/defaults), repos, hooks, tags.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:21.337049+01:00","updated_at":"2025-12-14T12:25:52.071937+01:00","closed_at":"2025-12-14T12:25:52.071937+01:00","dependencies":[{"issue_id":"code-organization-wax","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:27.757807+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-wax","depends_on_id":"code-organization-yfu","type":"blocks","created_at":"2025-12-14T12:15:28.267973+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-y52","title":"Add documentation for import-tui command","description":"Update README.md with import-tui usage examples. Document keyboard shortcuts. Document workflow: browse -\u003e select -\u003e configure -\u003e preview -\u003e execute. Add screenshots or ASCII diagrams if helpful.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-20T10:10:34.537124469+01:00","updated_at":"2025-12-21T17:16:59.090103157+01:00","closed_at":"2025-12-21T17:16:59.090103157+01:00","close_reason":"Completed: Added comprehensive documentation for import-tui command including workflow, keybindings, features, and examples","dependencies":[{"issue_id":"code-organization-y52","depends_on_id":"code-organization-c7o","type":"blocks","created_at":"2025-12-20T10:11:57.321532185+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-yfu","title":"Create co template list command","description":"Implement 'co template list' showing all templates with name, description, variable count. Support --json output.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T12:06:21.273214+01:00","updated_at":"2025-12-14T12:25:52.021718+01:00","closed_at":"2025-12-14T12:25:52.021718+01:00","dependencies":[{"issue_id":"code-organization-yfu","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:27.710274+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-yfu","depends_on_id":"code-organization-9tx","type":"blocks","created_at":"2025-12-14T12:15:28.215683+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-yln","title":"Document built-in partials in README","description":"Add a built-in partials list + usage examples to README Partials section","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T15:59:09.995156+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:59:48.762797+01:00","closed_at":"2025-12-31T15:59:48.762797+01:00","close_reason":"Completed","dependencies":[{"issue_id":"code-organization-yln","depends_on_id":"code-organization-2j3","type":"discovered-from","created_at":"2025-12-31T15:59:09.995944+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-yn2","title":"Create core template types (internal/template/template.go)","description":"Define Template, TemplateVar, TemplateRepo, TemplateFiles, TemplateHooks, HookSpec, HookEnv, CreateOptions, CreateResult structs. Include VarType constants (string, boolean, choice, integer). Schema version 1.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:06:20.105012+01:00","updated_at":"2025-12-14T12:19:16.20713+01:00","closed_at":"2025-12-14T12:19:16.20713+01:00","dependencies":[{"issue_id":"code-organization-yn2","depends_on_id":"code-organization-r9d","type":"parent-child","created_at":"2025-12-14T12:15:25.965706+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"code-organization-yn2","depends_on_id":"code-organization-8rv","type":"blocks","created_at":"2025-12-14T12:15:26.06879+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-z5e","title":"Add 'co partial apply' CLI command","description":"Add the apply subcommand to partial CLI:\n\nCOMMAND:\nco partial apply \u003cname\u003e [path] [flags]\n\nARGUMENTS:\n- name: Required - partial name to apply\n- path: Optional - target directory (default: current directory)\n\nFLAGS:\n- -v, --var \u003ckey=value\u003e: Set variable (repeatable via StringArrayVar)\n- --conflict \u003cstrategy\u003e: Override conflict strategy (prompt|skip|overwrite|backup)\n- --dry-run: Preview changes without applying\n- --no-hooks: Skip lifecycle hooks\n- --force: Apply even if prerequisites fail\n- -y, --yes: Accept all prompts automatically\n\nIMPLEMENTATION:\n1. Load config\n2. Parse flags into ApplyOptions struct\n3. Resolve target path (default to cwd, handle relative paths)\n4. Call partial.Apply(opts)\n5. Format and display result\n\nOUTPUT FORMATTING:\n- Human readable: Show each file action with status indicator\n  ✓ Created AGENTS.md\n  ✓ Created .claude/settings.json\n  - Skipped .gitignore (exists)\n  ! Backed up pyproject.toml → pyproject.toml.bak\n- JSON mode: Output ApplyResult struct\n\nDRY RUN OUTPUT:\n- Clear header: 'DRY RUN - No changes will be made'\n- Show resolved variables\n- Show planned actions with CREATE/SKIP/OVERWRITE/BACKUP labels\n- Show hooks that WOULD run\n- Summary counts at end\n\nERROR HANDLING:\n- PartialNotFoundError: List available partials\n- TargetNotFoundError: Suggest creating directory or check path\n- PrerequisiteFailedError: Show what's missing, suggest --force\n- Other errors: Show error and exit code 1\n\nFollow patterns from template creation in new.go","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:43:25.994504+01:00","created_by":"tormodhaugland","updated_at":"2025-12-31T15:08:34.146842+01:00","closed_at":"2025-12-31T15:08:34.146842+01:00","close_reason":"Added 'co partial apply' CLI command with --var, --conflict, --dry-run, --no-hooks, --force, --yes flags. Integrated with partial.Apply() function.","dependencies":[{"issue_id":"code-organization-z5e","depends_on_id":"code-organization-6hy","type":"blocks","created_at":"2025-12-31T14:43:49.045036+01:00","created_by":"tormodhaugland"},{"issue_id":"code-organization-z5e","depends_on_id":"code-organization-pzq","type":"parent-child","created_at":"2025-12-31T14:43:49.148618+01:00","created_by":"tormodhaugland"}]}
{"id":"code-organization-zgd","title":"Implement batch stash for selected folders","description":"Stash multiple selected folders in one operation. Show confirmation with list of folders. Execute stashes sequentially with progress. Show summary at end. Refresh tree to remove deleted folders.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-20T10:09:20.204788547+01:00","updated_at":"2025-12-21T12:07:19.384521314+01:00","closed_at":"2025-12-21T12:07:19.384521314+01:00","close_reason":"Implemented batch stash: added StateBatchStashConfirm/Execute/Summary states, BatchStashItemResult type, batch execution with archive.StashFolder, confirmation view with delete toggle, and summary with success/failure counts and deleted indicator","dependencies":[{"issue_id":"code-organization-zgd","depends_on_id":"code-organization-zr8","type":"blocks","created_at":"2025-12-20T10:11:48.244575143+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-zp4","title":"co open command: open workspace","description":"Implement 'co open \u003cslug\u003e' - opens workspace in configured editor, or prints path if no editor.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-13T18:34:23.634494+01:00","updated_at":"2025-12-13T18:52:44.700789+01:00","closed_at":"2025-12-13T18:52:44.700789+01:00","dependencies":[{"issue_id":"code-organization-zp4","depends_on_id":"code-organization-ryu","type":"blocks","created_at":"2025-12-13T18:34:33.546019+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"code-organization-zr3","title":"Implement Ollama embedder interface and client","description":"Create internal/embedder/ with Embedder interface (Embed, EmbedBatch, Dimension, ModelName) and OllamaEmbedder implementation using Ollama's /api/embed endpoint. Support nomic-embed-text model (768 dims).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T22:55:29.911444+01:00","updated_at":"2025-12-13T22:57:28.812391+01:00","closed_at":"2025-12-13T22:57:28.812391+01:00","dependencies":[{"issue_id":"code-organization-zr3","depends_on_id":"code-organization-k0l","type":"parent-child","created_at":"2025-12-13T22:56:36.983376+01:00","created_by":"tormodhaugland","metadata":"{}"}]}
{"id":"code-organization-zr8","title":"Add multi-select support for batch operations","description":"Allow space to toggle folder selection. Track selected folders in map. Enable batch import or batch stash of multiple folders. Show selection count in status bar. Adjust preview to show all selected items.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-20T10:09:16.167884868+01:00","updated_at":"2025-12-20T18:21:09.669262754+01:00","closed_at":"2025-12-20T18:21:09.669262754+01:00","close_reason":"Implemented multi-select: getSelectedNodes(), getSelectedCount(), clearAllSelections() helpers; space key toggles selection; visual ● marker; selection count in status bar; 3 unit tests","dependencies":[{"issue_id":"code-organization-zr8","depends_on_id":"code-organization-46w","type":"blocks","created_at":"2025-12-20T10:11:48.136326976+01:00","created_by":"daemon","metadata":"{}"}]}
